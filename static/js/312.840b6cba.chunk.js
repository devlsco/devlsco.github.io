"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[312],{5312:function(e,t,a){a.r(t);var n=a(1979),i=a(4507),o=a(9126),s=a(1889),l=a(6377),r=a(7391),c=a(8870),d=a(3044),g=a(6151),h=a(5527),u=a(1918),m=a(8096),p=a(4925),f=a(8837),S=a(3786),w=a(890),b=a(3469),x=a(4746),y=a(2791),I=a(7630),j=a(184);const v=(0,n.Z)({palette:{mode:"dark"}}),C=(0,I.ZP)("li")((e=>{let{theme:t}=e;return{margin:t.spacing(.5)}})),_=[{value:25,label:"25"},{value:100,label:"100"},{value:250,label:"250"},{value:500,label:"500"},{value:750,label:"750"},{value:1e3,label:"1000"}];function O(e){return`${e}ms`}const N=async e=>{if(!localStorage.getItem("login"))return null;const t=`https://api.twitch.tv/helix/users?${e.map((e=>`id=${encodeURIComponent(e.id)}`)).join("&")}`,a=await fetch(t,{headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("login")).access_token,"Client-ID":JSON.parse(localStorage.getItem("login")).client_id}}),n=await a.json();if(!a.ok)throw new Error(n.message?`${n.error}, ${n.message}`:a.statusText);return n.data.map((e=>({id:e.id,name:e.login,pfp:e.profile_image_url.replace("300x300","50x50")})))};function $(e,t){let a=[];for(let n=0;n<e.length;n+=t){let i=e.slice(n,n+t);a.push(i)}return a}t.default=()=>{const[e,t]=(0,y.useState)(""),[a,n]=(0,y.useState)(null),[I,Z]=(0,y.useState)(null),[J,k]=(0,y.useState)(""),[P,E]=(0,y.useState)(""),[T,L]=(0,y.useState)(100),[D,A]=(0,y.useState)([]),[B,z]=(0,y.useState)([]);async function W(e,t){try{await Promise.all($(t,100).map((async e=>{const a=await fetch(`https://api.twitch.tv/helix/users?login=${e.map((e=>e.login)).join("&login=")}`,{headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("login")).access_token,"Client-ID":JSON.parse(localStorage.getItem("login")).client_id}}),n=await a.json();if(!a.ok)throw new Error(`API Error -> Status: ${n.error}, ${n.status} - ${n.message}`);return n.data.forEach((e=>{const a=t.find((t=>t.login===e.login));a&&(a.id=e.id)})),n.data.map((e=>e.id))})));for(let a=0;a<t.length;a++){const n=t[a];fetch(`https://api.twitch.tv/helix/moderation/bans?broadcaster_id=${e}&moderator_id=${JSON.parse(localStorage.getItem("login")).id}`,{method:"POST",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("login")).access_token,"Client-ID":JSON.parse(localStorage.getItem("login")).client_id,"Content-Type":"application/json"},body:JSON.stringify({data:{user_id:n.id,reason:n.reason}})}),await new Promise((e=>setTimeout(e,T)))}}catch(a){throw console.log(a),new Error(`Error: ${a.message}`)}}async function U(e,t){try{await Promise.all($(t,100).map((async e=>{const a=await fetch(`https://api.twitch.tv/helix/users?login=${e.map((e=>e.login)).join("&login=")}`,{headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("login")).access_token,"Client-ID":JSON.parse(localStorage.getItem("login")).client_id}}),n=await a.json();if(!a.ok)throw new Error(`API Error -> Status: ${n.error}, ${n.status} - ${n.message}`);return n.data.forEach((e=>{const a=t.find((t=>t.login===e.login));a&&(a.id=e.id)})),n.data.map((e=>e.id))})));for(let a=0;a<t.length;a++){const n=t[a];fetch(`https://api.twitch.tv/helix/moderation/bans?broadcaster_id=${e}&moderator_id=${JSON.parse(localStorage.getItem("login")).id}`,{method:"POST",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("login")).access_token,"Client-ID":JSON.parse(localStorage.getItem("login")).client_id,"Content-Type":"application/json"},body:JSON.stringify({data:{user_id:n.id,duration:Number(n.duration),reason:n.reason}})}),await new Promise((e=>setTimeout(e,T)))}}catch(a){throw console.log(a),new Error(`Error: ${a.message}`)}}async function Y(e,t){try{for(let a=0;a<t.length;a++){const n=t[a];fetch(`https://api.twitch.tv/helix/moderation/bans?broadcaster_id=${e}&moderator_id=${JSON.parse(localStorage.getItem("login")).id}`,{method:"POST",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("login")).access_token,"Client-ID":JSON.parse(localStorage.getItem("login")).client_id,"Content-Type":"application/json"},body:JSON.stringify({data:{user_id:n.id,reason:n.reason}})}),await new Promise((e=>setTimeout(e,T)))}}catch(a){throw console.log(a),new Error(`Error: ${a.message}`)}}async function R(e,t){try{for(let a=0;a<t.length;a++){const n=t[a];fetch(`https://api.twitch.tv/helix/moderation/bans?broadcaster_id=${e}&moderator_id=${JSON.parse(localStorage.getItem("login")).id}`,{method:"POST",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("login")).access_token,"Client-ID":JSON.parse(localStorage.getItem("login")).client_id,"Content-Type":"application/json"},body:JSON.stringify({data:{user_id:n.id,duration:Number(n.duration),reason:n.reason}})}),await new Promise((e=>setTimeout(e,T)))}}catch(a){throw console.log(a),new Error(`Error: ${a.message}`)}}async function M(e,t){try{await Promise.all($(t,100).map((async e=>{const a=await fetch(`https://api.twitch.tv/helix/users?login=${e.map((e=>e.login)).join("&login=")}`,{headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("login")).access_token,"Client-ID":JSON.parse(localStorage.getItem("login")).client_id}}),n=await a.json();if(!a.ok)throw new Error(`API Error -> Status: ${n.error}, ${n.status} - ${n.message}`);return n.data.forEach((e=>{const a=t.find((t=>t.login===e.login));a&&(a.id=e.id)})),n.data.map((e=>e.id))})));for(let a=0;a<t.length;a++){const n=t[a];fetch(`https://api.twitch.tv/helix/moderation/bans?broadcaster_id=${e}&moderator_id=${JSON.parse(localStorage.getItem("login")).id}&user_id=${n.id}`,{method:"DELETE",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("login")).access_token,"Client-ID":JSON.parse(localStorage.getItem("login")).client_id,"Content-Type":"application/json"}}),await new Promise((e=>setTimeout(e,T)))}}catch(a){throw console.log(a),new Error(`Error: ${a.message}`)}}async function V(e,t){try{for(let a=0;a<t.length;a++){const n=t[a];fetch(`https://api.twitch.tv/helix/moderation/bans?broadcaster_id=${e}&moderator_id=${JSON.parse(localStorage.getItem("login")).id}&user_id=${n.id}`,{method:"DELETE",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("login")).access_token,"Client-ID":JSON.parse(localStorage.getItem("login")).client_id,"Content-Type":"application/json"}}),await new Promise((e=>setTimeout(e,T)))}}catch(a){throw console.log(a),new Error(`Error: ${a.message}`)}}(0,y.useEffect)((()=>{document.title="LsCo Software - Crossban";localStorage.getItem("login")||null||(n("Log in to get started."),Z(null))}),[]),(0,y.useEffect)((()=>{(async()=>{const e=localStorage.getItem("crossbanChannels");if(e){const t=JSON.parse(e),a=await N(t);z(null!==a&&void 0!==a?a:[])}})()}),[]);return(0,j.jsx)(x.Z,{title:"Crossban",description:"Ban/timeout multiple users in multiple channels.",children:(0,j.jsxs)(s.ZP,{container:!0,spacing:2,alignItems:"center",children:[(0,j.jsx)(s.ZP,{item:!0,xs:12,children:(0,j.jsx)(i.Z,{theme:v,children:(0,j.jsx)(l.Z,{options:D,getOptionLabel:e=>e.name,onChange:(e,t)=>E(t),renderInput:e=>(0,j.jsx)(r.Z,{...e,fullWidth:!0,id:"outlined-basic",label:"Add Channel",variant:"outlined",onChange:e=>(async e=>{if(!localStorage.getItem("login"))return A([]);if(""!==e.trim()){const t=await fetch(`https://api.twitch.tv/helix/search/channels?query=${e}&first=25`,{headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("login")).access_token,"Client-ID":JSON.parse(localStorage.getItem("login")).client_id}}),a=await t.json();t.ok?A(a.data.map((e=>({name:e.display_name,id:e.id,avatarUrl:e.thumbnail_url.replace("300x300","50x50")})))):A([])}else A([])})(e.target.value)}),renderOption:(e,t)=>(0,j.jsx)("li",{...e,children:(0,j.jsxs)(c.Z,{display:"flex",alignItems:"center",children:[(0,j.jsx)(d.Z,{src:t.avatarUrl,alt:t.name,sx:{width:25,height:25,marginRight:1}}),t.name]})})})})}),(0,j.jsx)(s.ZP,{item:!0,xs:12,children:(0,j.jsx)(g.Z,{fullWidth:!0,variant:"outlined",onClick:async()=>{if(!localStorage.getItem("login"))return n(null),void Z("Log in to get started.");if(""===P.name.trim())return n(null),void Z("You must specify a Crossban channel");const e=localStorage.getItem("crossbanChannels")?JSON.parse(localStorage.getItem("crossbanChannels")):[];if(console.log(P),e.find((e=>e.id===P.id)))return n(null),void Z(`${P.name} is already in Crossban list.`);e.push({id:P.id}),localStorage.setItem("crossbanChannels",JSON.stringify(e));const t=await N([{id:P.id}]),a=[...B,{id:P.id,name:t[0].name,pfp:t[0].pfp}];z(a),n(`Successfully added ${P.name} as Crossban channel.`),Z(null)},size:"large",children:(0,j.jsx)(o.IaE,{size:20})})}),(0,j.jsx)(s.ZP,{item:!0,xs:12,children:(0,j.jsx)(h.Z,{sx:{display:"flex",justifyContent:"center",flexWrap:"warp",listStyle:"none",p:.5,m:0},component:"ul",children:B.map((e=>(0,j.jsx)(C,{children:(0,j.jsx)(u.Z,{avatar:(0,j.jsx)(d.Z,{alt:"xd",src:e.pfp}),label:`${e.name} - ID: ${e.id}`,onDelete:()=>{return t=e,localStorage.setItem("crossbanChannels",JSON.stringify(JSON.parse(localStorage.getItem("crossbanChannels")).filter((e=>e.id!==t.id)))),void z((e=>e.filter((e=>e.id!==t.id))));var t}})},e.id)))})}),(0,j.jsx)(s.ZP,{item:!0,xs:12,children:(0,j.jsx)(i.Z,{theme:v,children:(0,j.jsxs)(m.Z,{fullWidth:!0,id:"outlined-basic",variant:"outlined",children:[(0,j.jsx)(p.Z,{id:"type-label",children:"Type"}),(0,j.jsxs)(f.Z,{label:"Type",value:J,onChange:e=>k(e.target.value),labelId:"type-label",id:"type-select",children:[(0,j.jsx)(S.Z,{value:"filesay",children:"Filesay"}),(0,j.jsx)(S.Z,{value:"ban-list-name",children:"Ban List (Name)"}),(0,j.jsx)(S.Z,{value:"unban-list-name",children:"Unban List (Name)"}),(0,j.jsx)(S.Z,{value:"ban-list-id",children:"Ban List (ID)"}),(0,j.jsx)(S.Z,{value:"unban-list-id",children:"Unban List (ID)"})]})]})})}),(0,j.jsx)(s.ZP,{item:!0,xs:12,children:(0,j.jsx)(i.Z,{theme:v,children:(0,j.jsx)(r.Z,{fullWidth:!0,multiline:!0,rows:10,id:"outlined-basic",label:"Text",variant:"outlined",value:e,onChange:e=>t(e.target.value)})})}),(0,j.jsxs)(s.ZP,{item:!0,xs:12,style:{textAlign:"right"},children:["Lines. (",e.split("\n").length,"/500)"]}),(0,j.jsx)(i.Z,{theme:v,children:(0,j.jsxs)(s.ZP,{item:!0,xs:12,children:[(0,j.jsx)(w.Z,{gutterBottom:!0,children:"Output speed in ms (Milliseconds)"}),(0,j.jsx)(m.Z,{fullWidth:!0,variant:"filled",children:(0,j.jsx)(b.ZP,{"aria-label":"Delay",value:T,onChange:(e,t)=>{L(t)},getAriaValueText:O,step:null,valueLabelDisplay:"auto",marks:_,min:_[0].value,max:_[_.length-1].value})})]})}),(0,j.jsx)(s.ZP,{item:!0,xs:12,children:(0,j.jsx)(g.Z,{variant:"contained",fullWidth:!0,onClick:async()=>{if(!localStorage.getItem("login"))return n(null),void Z("Log in to get started.");if(!B.length)return n(null),void Z("You must specify a channel");if(!J)return n(null),void Z("You must specify a filesay type");if(!e.trim())return n(null),void Z("You must specify a filesay list");try{const t=e.split(/\r?\n/).map((e=>e.trim()));let a;if(t.length>=500)return n(null),void Z("You have too many lines.");n(null),Z(null),a="ban-list-id"===J?4:"unban-list-id"===J?3:"ban-list-name"===J?2:"unban-list-name"===J?1:0;const i=[],o=[],s=[],l=[],r=[],c=[],d=[];for(let e=0;e<t.length;e++){const n=t[e];if(n)switch(a){case 0:switch(!0){case null!==n.match(/^(\.|\/)timeout\s\w+\s(\d+)(\s.+)?/i):{const[,e,t,...a]=n.split(/\s+/);o.find((t=>t.login===e.toLowerCase()))||o.push({login:e.toLowerCase(),duration:t,reason:a.join(" ")||""});break}case null!==n.match(/^(\.|\/)ban\s\w+(\s.+)?/i):{const[,e,...t]=n.split(/\s+/);r.find((t=>t.login===e.toLowerCase()))||r.push({login:e.toLowerCase(),reason:t.join(" ")||""});break}case null!==n.match(/^(\.|\/)unban\s\w+/i)||null!==n.match(/^(\.|\/)untimeout\s\w+/i):{const[,e]=n.split(/\s+/);l.find((t=>t.login===e.toLowerCase()))||l.push({login:e.toLowerCase()});break}case null!==n.match(/^(\.|\/)timeoutid\s\w+\s(\d+)(\s.+)?/i):{const[,e,t,...a]=n.split(/\s+/);s.find((t=>t.id===e))||s.push({id:e,duration:t,reason:a.join(" ")||""});break}case null!==n.match(/^(\.|\/)banid\s\w+(\s.+)?/i):{const[,e,...t]=n.split(/\s+/);d.find((t=>t.id===e))||d.push({id:e,reason:t.join(" ")||""});break}case null!==n.match(/^(\.|\/)unbanid\s\w+/i)||null!==n.match(/^(\.|\/)untimeoutid\s\w+/i):{const[,e]=n.split(/\s+/);c.find((t=>t.id===e))||c.push({id:e});break}default:i.push({message:n})}break;case 1:{const[e]=n.split(/\s+/);l.find((t=>t.login===e.toLowerCase()))||l.push({login:e.toLowerCase()});break}case 2:{const[e,...t]=n.split(/\s+/);r.find((t=>t.login===e.toLowerCase()))||r.push({login:e.toLowerCase(),reason:t?t.join(" "):"Ban-list"});break}case 3:{const[e]=n.split(/\s+/);l.find((t=>t.id===e))||c.push({id:e});break}case 4:{const[e,...t]=n.split(/\s+/);r.find((t=>t.id===e))||d.push({id:e,reason:t?t.join(" "):"Ban-list"});break}}}console.log("Bans",r,r.length),console.log("Unbans",l,l.length),console.log("Bans (ID)",d,d.length),console.log("Unbans (ID)",c,c.length),console.log("Timeouts",o,o.length),console.log("Timeouts (ID)",s,s.length),console.log("Messages",i,i.length);for(let e=0;e<B.length;e++){const t=B[e];if(await Promise.all([W(t.id,r),M(t.id,l),Y(t.id,d),V(t.id,c),U(t.id,o),R(t.id,s)]),i.length){const e=new WebSocket("wss://irc-ws.chat.twitch.tv");e.onopen=async()=>{e.send("CAP REQ :twitch.tv/membership twitch.tv/tags twitch.tv/commands"),e.send("PASS oauth:"+JSON.parse(localStorage.getItem("login")).access_token),e.send("NICK "+JSON.parse(localStorage.getItem("login")).login);for(let a=0;a<i.length;a++){const n=i[a].message;e.send(`PRIVMSG #${t.name} :${n}`),await new Promise((e=>setTimeout(e,T))),a===i.length-1&&e.close()}}}await new Promise((e=>setTimeout(e,500)))}}catch(t){return console.log(t),n(null),void Z(t.message)}},children:"Send"})}),(0,j.jsxs)(s.ZP,{item:!0,xs:12,children:[I&&(0,j.jsx)(w.Z,{variant:"body2",style:{color:"red",marginTop:"10px",textAlign:"center"},children:I}),a&&(0,j.jsx)(w.Z,{variant:"body2",style:{marginTop:"10px",textAlign:"center"},children:a})]})]})})}}}]);
//# sourceMappingURL=312.840b6cba.chunk.js.map