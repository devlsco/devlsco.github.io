"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[436],{1436:function(e,a,t){t.r(a);var n=t(4605),r=t.n(n),i=t(2791),s=t(8870),l=t(890),o=t(1889),d=t(7391),c=t(6377),h=t(3044),u=t(6151),x=t(43),p=t(625),m=t(4070),g=t(5228),f=t(3896),j=t(4746),b=t(184);const v=i.forwardRef((function(e,a){return(0,b.jsx)(m.Z,{elevation:6,ref:a,variant:"filled",...e})}));function y(e){const{children:a,value:t,index:n,...r}=e;return(0,b.jsx)("div",{role:"tabpanel",hidden:t!==n,id:`simple-tabpanel-${n}`,"aria-labelledby":`simple-tab-${n}`,...r,children:t===n&&(0,b.jsx)(s.Z,{sx:{p:3},children:(0,b.jsx)(l.Z,{children:a})})})}function _(e){return{id:`simple-tab-${e}`,"aria-controls":`simple-tabpanel-${e}`}}async function w(e){const a=await fetch(`https://api.twitch.tv/helix/users?id=${encodeURIComponent(e)}`,{responseType:"json",throwHttpErrors:!1,headers:{"Client-Id":"9uavest5z7knsvpbip19fxqkywxz3ec"}}),t=await a.json();if(!a.ok)throw new Error(t.message?`${t.error}, ${t.message}`:a.statusText);if(!t.data[0])throw new Error("Channel not found.");return t.data[0]}a.default=()=>{const[e,a]=(0,i.useState)([]),[t,n]=(0,i.useState)([]),[m,Z]=(0,i.useState)({name:"",id:null,avatarUrl:""}),[C,k]=(0,i.useState)(""),[S,I]=(0,i.useState)(!1),[$,U]=(0,i.useState)(!1),[T,z]=(0,i.useState)(""),[D,P]=(0,i.useState)(""),[R,q]=(0,i.useState)(null),[E,O]=(0,i.useState)(null),[W,H]=(0,i.useState)(null),[L,N]=(0,i.useState)(0),A=(0,i.useRef)(null);(0,i.useEffect)((()=>{document.title="LsCo Software - Dashboard"}),[]),(0,i.useEffect)((()=>{if(!R)return;(async()=>{try{const e=await w(R.name.split(" ")[3]);H(null),O(e)}catch(e){H(e.message),O(null)}})()}),[R]),(0,i.useEffect)((()=>{(async()=>{const e=JSON.parse(localStorage.getItem("login"));if(null!==localStorage.getItem("login"))try{const a=await fetch(`https://api.twitch.tv/helix/channels?broadcaster_id=${e.id}`,{headers:{"Client-Id":"9uavest5z7knsvpbip19fxqkywxz3ec"}}),t=await a.json();if(a.ok&&t.data.length>0){const e=t.data[0];Z({name:e.game_name.length?e.game_name:"None",id:e.game_id.length?e.game_id:0,avatarUrl:""}),k(e.title)}}catch(a){console.error(a)}})()}),[]);const J=()=>{I(!0)},B=(e,a)=>{"clickaway"!==a&&I(!1)},V=(e,a)=>{"clickaway"!==a&&U(!1)};return(0,b.jsxs)(j.Z,{title:"Dashboard",description:"Here you can update the stream or get info about a user.",children:[(0,b.jsxs)(s.Z,{sx:{width:"100%"},children:[(0,b.jsx)(s.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,b.jsxs)(g.Z,{value:L,onChange:(e,a)=>{N(a)},"aria-label":"basic tabs example",children:[(0,b.jsx)(f.Z,{label:"Stream Dashboard",..._(0)}),(0,b.jsx)(f.Z,{label:"Userinfo",..._(1)})]})}),(0,b.jsx)(y,{value:L,index:0,children:(0,b.jsxs)(o.ZP,{container:!0,spacing:2,children:[(0,b.jsx)(o.ZP,{item:!0,xs:12,sm:6,children:(0,b.jsx)(d.Z,{fullWidth:!0,id:"standard-basic",label:"Title",variant:"filled",value:C,onChange:e=>k(e.target.value),autoFocus:!0})}),(0,b.jsx)(o.ZP,{item:!0,xs:12,sm:6,children:(0,b.jsx)(c.Z,{value:m,options:e,getOptionLabel:e=>e.name,onChange:(e,a)=>{Z(null!==a&&void 0!==a?a:{name:"",id:null,avatarUrl:""})},isOptionEqualToValue:(e,a)=>e.id===a.id,renderInput:e=>(0,b.jsx)(d.Z,{...e,fullWidth:!0,id:"standard-basic",label:"Game",variant:"filled",onChange:e=>{(async e=>{if(""!==e.trim()){const t=await fetch(`https://api.twitch.tv/helix/search/categories?query=${decodeURIComponent(e)}&first=15`,{headers:{"Client-Id":"9uavest5z7knsvpbip19fxqkywxz3ec"}}),n=await t.json();t.ok?a(n.data.map((e=>({name:e.name,id:e.id,avatarUrl:e.box_art_url.replace("52x72","30x40")})))):a([])}else a([])})(e.target.value)}}),renderOption:(e,a)=>(0,b.jsx)("li",{...e,children:(0,b.jsxs)(s.Z,{display:"flex",alignItems:"center",children:[(0,b.jsx)(h.Z,{variant:"square",src:a.avatarUrl,alt:a.name,sx:{width:30,height:40,marginRight:1}}),a.name]})})})}),(0,b.jsx)(o.ZP,{item:!0,children:(0,b.jsx)(u.Z,{variant:"text",fullWidth:!0,onClick:async()=>{const e=JSON.parse(localStorage.getItem("login"));if(!e)return z("Log in to update your title & game."),void J();const a=decodeURIComponent(e.id);try{var t;const n=await fetch(`https://api.twitch.tv/helix/channels?broadcaster_id=${a}`,{method:"PATCH",headers:{Authorization:"Bearer "+e.access_token,"Client-ID":e.client_id,"Content-Type":"application/json"},body:JSON.stringify({game_id:null!==(t=m.id)&&void 0!==t?t:0,title:C.length?C:" "})});if(n.ok)P("Successfully updated your title & game."),U(!0);else{const e=await n.json();z(e.message),J()}}catch(n){console.error(n)}},children:"Update"})})]})}),(0,b.jsx)(y,{value:L,index:1,children:(0,b.jsxs)(o.ZP,{container:!0,spacing:2,children:[(0,b.jsx)(o.ZP,{item:!0,xs:12,sm:6,children:(0,b.jsx)(c.Z,{options:t,getOptionLabel:e=>e.name,onChange:(e,a)=>{q(a)},renderInput:e=>(0,b.jsx)(d.Z,{...e,fullWidth:!0,id:"standard-basic",label:"User information",variant:"filled",onChange:e=>{(async e=>{if(""!==e.trim()){const a=await fetch(`https://api.twitch.tv/helix/search/channels?query=${e}&first=25`,{headers:{"Client-Id":"9uavest5z7knsvpbip19fxqkywxz3ec"}}),t=await a.json();a.ok?n(t.data.map((e=>({name:`${new RegExp("^\\w+$").test(e.display_name)?e.display_name:e.broadcaster_login} - ID: ${e.id}`,avatarUrl:e.thumbnail_url.replace("300x300","50x50")})))):n([])}else n([])})(e.target.value)}}),renderOption:(e,a)=>(0,b.jsx)("li",{...e,children:(0,b.jsxs)(s.Z,{display:"flex",alignItems:"center",children:[(0,b.jsx)(h.Z,{src:a.avatarUrl,alt:a.name,sx:{width:25,height:25,marginRight:1}}),a.name]})})})}),(0,b.jsx)(o.ZP,{item:!0,xs:6,children:(0,b.jsx)(d.Z,{fullWidth:!0,id:"standard-basic",label:"Channel by ID",variant:"filled",onChange:e=>{(async e=>{clearTimeout(A.current),""!==e.trim()&&(A.current=setTimeout((async()=>{(async()=>{try{const a=await w(e);H(null),O(a)}catch(a){H(a.message),O(null)}})()}),500))})(e.target.value)}})}),(0,b.jsxs)(o.ZP,{item:!0,xs:12,children:[W&&(0,b.jsx)(l.Z,{variant:"body2",style:{color:"red",marginTop:"10px",textAlign:"center"},children:W}),E&&(0,b.jsxs)(s.Z,{sx:{backgroundColor:"rgb(250,250,250,0.1)",borderRadius:"5px",padding:"15px",whiteSpace:"pre-wrap",maxWidth:"100%",overflowX:"auto"},children:[(0,b.jsxs)(l.Z,{variant:"body2",component:"pre",children:[(0,b.jsx)("strong",{children:"id:"})," ",E.id,(0,b.jsx)("br",{}),(0,b.jsx)("strong",{children:"login:"})," ",E.login,(0,b.jsx)("br",{}),(0,b.jsx)("strong",{children:"display_name:"})," ",E.display_name,(0,b.jsx)("br",{}),(0,b.jsx)("strong",{children:"type:"})," ",""===E.type?"default":E.type,(0,b.jsx)("br",{}),(0,b.jsx)("strong",{children:"broadcaster_type:"})," ",""===E.broadcaster_type?"default":E.broadcaster_type,(0,b.jsx)("br",{}),(0,b.jsx)("strong",{children:"description:"})," ",""===E.description?"default":E.description,(0,b.jsx)("br",{}),(0,b.jsx)("strong",{children:"profile_image_url:"})," ",""===E.profile_image_url?"default":(0,b.jsx)(x.Z,{target:"_blank",href:E.profile_image_url,children:E.profile_image_url}),(0,b.jsx)("br",{}),(0,b.jsx)("strong",{children:"offline_image_url:"})," ",""===E.offline_image_url?"default":(0,b.jsx)(x.Z,{target:"_blank",href:E.offline_image_url,children:E.offline_image_url}),(0,b.jsx)("br",{}),(0,b.jsx)("strong",{children:"created_at:"})," ",E.created_at," (",(F=new Date(E.created_at).getTime(),r()(Date.now()-F,{units:["y","mo","d","h","m","s"],largest:4,round:!0,spacer:" ",conjunction:" and ",serialComma:!1,zero:"0"}))," ago)"]}),(0,b.jsx)(u.Z,{variant:"contained",color:"primary",href:`https://www.twitch.tv/${E.login}`,target:"_blank",rel:"noopener noreferrer",style:{marginTop:"10px"},children:"Visit Channel"})]})]})]})})]}),(0,b.jsx)(p.Z,{open:S,autoHideDuration:2500,onClose:B,children:(0,b.jsx)(v,{onClose:B,severity:"error",sx:{width:"100%"},children:T})}),(0,b.jsx)(p.Z,{open:$,autoHideDuration:1500,onClose:V,children:(0,b.jsx)(v,{onClose:V,severity:"success",sx:{width:"100%"},children:D})})]});var F}}}]);
//# sourceMappingURL=436.43d6d4a7.chunk.js.map