"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[436],{1436:function(e,t,a){a.r(t);var r=a(4605),n=a.n(r),i=a(2791),l=a(8870),s=a(890),o=a(1889),c=a(7391),d=a(6377),h=a(3044),g=a(6151),u=a(43),m=a(625),p=a(4070),x=a(5228),f=a(3896),j=a(4746),_=a(184);const b=i.forwardRef((function(e,t){return(0,_.jsx)(p.Z,{elevation:6,ref:t,variant:"filled",...e})}));function y(e){const{children:t,value:a,index:r,...n}=e;return(0,_.jsx)("div",{role:"tabpanel",hidden:a!==r,id:`simple-tabpanel-${r}`,"aria-labelledby":`simple-tab-${r}`,...n,children:a===r&&(0,_.jsx)(l.Z,{sx:{p:3},children:(0,_.jsx)(s.Z,{children:t})})})}function w(e){return{id:`simple-tab-${e}`,"aria-controls":`simple-tabpanel-${e}`}}async function v(e){if(!localStorage.getItem("login"))return;const t=await fetch(`https://api.twitch.tv/helix/users?id=${encodeURIComponent(e.trim())}`,{responseType:"json",throwHttpErrors:!1,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("login")).access_token,"Client-ID":JSON.parse(localStorage.getItem("login")).client_id}}),a=await t.json();if(!t.ok)throw new Error(a.message?`${a.error}, ${a.message}`:t.statusText);if(!a.data[0])throw new Error("Channel not found.");return a.data[0]}t.default=()=>{const[e,t]=(0,i.useState)([]),[a,r]=(0,i.useState)([]),[p,S]=(0,i.useState)({name:"",id:null,avatarUrl:""}),[Z,C]=(0,i.useState)(""),[I,k]=(0,i.useState)(!1),[O,$]=(0,i.useState)(!1),[D,U]=(0,i.useState)(""),[N,T]=(0,i.useState)(""),[J,P]=(0,i.useState)(null),[A,E]=(0,i.useState)(null),[R,z]=(0,i.useState)(null),[W,B]=(0,i.useState)(0);(0,i.useEffect)((()=>{document.title="LsCo Software - Dashboard"}),[]),(0,i.useEffect)((()=>{if(!J)return;(async()=>{try{const e=await v(J.name.split(" ")[3]);z(null),E(e)}catch(e){z(e.message),E(null)}})()}),[J]),(0,i.useEffect)((()=>{(async()=>{const e=JSON.parse(localStorage.getItem("login"));if(null!==localStorage.getItem("login"))try{const t=await fetch(`https://api.twitch.tv/helix/channels?broadcaster_id=${e.id}`,{headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("login")).access_token,"Client-ID":JSON.parse(localStorage.getItem("login")).client_id}}),a=await t.json();if(t.ok&&a.data.length>0){const e=a.data[0];S({name:e.game_name.length?e.game_name:"None",id:e.game_id.length?e.game_id:0,avatarUrl:""}),C(e.title)}}catch(t){console.error(t)}})()}),[]);const H=()=>{k(!0)},L=(e,t)=>{"clickaway"!==t&&k(!1)},q=(e,t)=>{"clickaway"!==t&&$(!1)};return(0,_.jsxs)(j.Z,{title:"Dashboard",description:"Here you can update the stream or get info about a user.",children:[(0,_.jsx)(l.Z,{children:(0,_.jsxs)(x.Z,{value:W,onChange:(e,t)=>{B(t)},"aria-label":"basic tabs example",children:[(0,_.jsx)(f.Z,{label:"Stream Dashboard",...w(0)}),(0,_.jsx)(f.Z,{label:"Userinfo",...w(1)})]})}),(0,_.jsx)(y,{value:W,index:0,children:(0,_.jsxs)(o.ZP,{container:!0,spacing:2,children:[(0,_.jsx)(o.ZP,{item:!0,xs:12,sm:6,children:(0,_.jsx)(c.Z,{fullWidth:!0,id:"standard-basic",label:"Title",variant:"filled",value:Z,onChange:e=>C(e.target.value),autoFocus:!0})}),(0,_.jsx)(o.ZP,{item:!0,xs:12,sm:6,children:(0,_.jsx)(d.Z,{value:p,options:e,getOptionLabel:e=>e.name,onChange:(e,t)=>{S(null!==t&&void 0!==t?t:{name:"",id:null,avatarUrl:""})},isOptionEqualToValue:(e,t)=>e.id===t.id,renderInput:e=>(0,_.jsx)(c.Z,{...e,fullWidth:!0,id:"standard-basic",label:"Game",variant:"filled",onChange:e=>{(async e=>{if(!localStorage.getItem("login"))return t([]);if(""!==e.trim()){const a=await fetch(`https://api.twitch.tv/helix/search/categories?query=${decodeURIComponent(e)}&first=15`,{headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("login")).access_token,"Client-ID":JSON.parse(localStorage.getItem("login")).client_id}}),r=await a.json();a.ok?t(r.data.map((e=>({name:e.name,id:e.id,avatarUrl:e.box_art_url.replace("500","520")})))):t([])}else t([])})(e.target.value)}}),renderOption:(e,t)=>(0,_.jsx)("li",{...e,children:(0,_.jsxs)(l.Z,{display:"flex",alignItems:"center",children:[(0,_.jsx)(h.Z,{variant:"square",src:t.avatarUrl,alt:t.name,sx:{width:35,height:45,marginRight:1}}),t.name]})})})}),(0,_.jsx)(o.ZP,{item:!0,children:(0,_.jsx)(g.Z,{variant:"text",fullWidth:!0,onClick:async()=>{const e=JSON.parse(localStorage.getItem("login"));if(!e)return U("Log in with your Twitch account to use this tool"),void H();const t=decodeURIComponent(e.id);try{var a;const r=await fetch(`https://api.twitch.tv/helix/channels?broadcaster_id=${t}`,{method:"PATCH",headers:{Authorization:"Bearer "+e.access_token,"Client-ID":e.client_id,"Content-Type":"application/json"},body:JSON.stringify({game_id:null!==(a=p.id)&&void 0!==a?a:0,title:Z.length?Z:" "})});if(r.ok)T("Successfully updated your title & game."),$(!0);else{const e=await r.json();U(e.message),H()}}catch(r){console.error(r)}},children:"Update"})})]})}),(0,_.jsx)(y,{value:W,index:1,children:(0,_.jsxs)(o.ZP,{container:!0,spacing:2,children:[(0,_.jsx)(o.ZP,{item:!0,xs:12,sm:6,children:(0,_.jsx)(d.Z,{options:a,getOptionLabel:e=>e.name,onChange:(e,t)=>{P(t)},renderInput:e=>(0,_.jsx)(c.Z,{...e,fullWidth:!0,id:"standard-basic",label:"User information",variant:"filled",onChange:e=>{(async e=>{if(!localStorage.getItem("login"))return r([]);if(""!==e.trim()){const t=await fetch(`https://api.twitch.tv/helix/search/channels?query=${e}&first=25`,{headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("login")).access_token,"Client-ID":JSON.parse(localStorage.getItem("login")).client_id}}),a=await t.json();t.ok?r(a.data.map((e=>({name:`${new RegExp("^\\w+$").test(e.display_name)?e.display_name:e.broadcaster_login} - ID: ${e.id}`,avatarUrl:e.thumbnail_url.replace("300x300","50x50")})))):r([])}else r([])})(e.target.value)}}),renderOption:(e,t)=>(0,_.jsx)("li",{...e,children:(0,_.jsxs)(l.Z,{display:"flex",alignItems:"center",children:[(0,_.jsx)(h.Z,{src:t.avatarUrl,alt:t.name,sx:{width:25,height:25,marginRight:1}}),t.name]})})})}),(0,_.jsx)(o.ZP,{item:!0,xs:12,sm:6,children:(0,_.jsx)(c.Z,{fullWidth:!0,id:"standard-basic",label:"Channel by ID",variant:"filled",onChange:e=>{(async e=>{""!==e.trim()&&(async()=>{try{const t=await v(e);z(null),E(t)}catch(t){z(t.message),E(null)}})()})(e.target.value)}})}),(0,_.jsxs)(o.ZP,{item:!0,xs:12,children:[R&&(0,_.jsx)(s.Z,{variant:"body2",style:{color:"red",marginTop:"10px",textAlign:"center"},children:R}),!localStorage.getItem("login")&&(0,_.jsx)(s.Z,{variant:"body2",style:{color:"red",marginTop:"10px",textAlign:"center"},children:"Log in with your Twitch account to use this tool"}),A&&(0,_.jsxs)(l.Z,{sx:{backgroundColor:"rgb(250,250,250,0.1)",borderRadius:"5px",padding:"15px",whiteSpace:"pre-wrap",maxWidth:"100%",overflowX:"auto"},children:[(0,_.jsxs)(s.Z,{variant:"body2",component:"pre",children:[(0,_.jsx)("strong",{children:"id:"})," ",A.id,(0,_.jsx)("br",{}),(0,_.jsx)("strong",{children:"login:"})," ",A.login,(0,_.jsx)("br",{}),(0,_.jsx)("strong",{children:"display_name:"})," ",A.display_name,(0,_.jsx)("br",{}),(0,_.jsx)("strong",{children:"type:"})," ",""===A.type?"default":A.type,(0,_.jsx)("br",{}),(0,_.jsx)("strong",{children:"broadcaster_type:"})," ",""===A.broadcaster_type?"default":A.broadcaster_type,(0,_.jsx)("br",{}),(0,_.jsx)("strong",{children:"description:"})," ",""===A.description?"default":A.description,(0,_.jsx)("br",{}),(0,_.jsx)("strong",{children:"profile_image_url:"})," ",""===A.profile_image_url?"default":(0,_.jsx)(u.Z,{target:"_blank",href:A.profile_image_url,children:A.profile_image_url}),(0,_.jsx)("br",{}),(0,_.jsx)("strong",{children:"offline_image_url:"})," ",""===A.offline_image_url?"default":(0,_.jsx)(u.Z,{target:"_blank",href:A.offline_image_url,children:A.offline_image_url}),(0,_.jsx)("br",{}),(0,_.jsx)("strong",{children:"created_at:"})," ",A.created_at," (",(V=new Date(A.created_at).getTime(),n()(Date.now()-V,{units:["y","mo","d","h","m","s"],largest:4,round:!0,spacer:" ",conjunction:" and ",serialComma:!1,zero:"0"}))," ago)"]}),(0,_.jsx)(g.Z,{variant:"contained",color:"primary",href:`https://www.twitch.tv/${A.login}`,target:"_blank",rel:"noopener noreferrer",style:{marginTop:"10px"},children:"Visit Channel"})]})]})]})}),(0,_.jsx)(m.Z,{open:I,autoHideDuration:2500,onClose:L,children:(0,_.jsx)(b,{onClose:L,severity:"error",sx:{width:"100%"},children:D})}),(0,_.jsx)(m.Z,{open:O,autoHideDuration:1500,onClose:q,children:(0,_.jsx)(b,{onClose:q,severity:"success",sx:{width:"100%"},children:N})})]});var V}}}]);
//# sourceMappingURL=436.119484fc.chunk.js.map