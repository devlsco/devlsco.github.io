"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[436],{1436:function(e,t,a){a.r(t);var i=a(2791),n=a(1889),s=a(7391),r=a(6377),l=a(8870),o=a(3044),c=a(6151),d=a(625),u=a(4070),h=a(4746),m=a(184);const g=i.forwardRef((function(e,t){return(0,m.jsx)(u.Z,{elevation:6,ref:t,variant:"filled",...e})}));t.default=()=>{const[e,t]=(0,i.useState)([]),[a,u]=(0,i.useState)({name:"",id:null,avatarUrl:""}),[p,f]=(0,i.useState)(""),[x,v]=(0,i.useState)(!1),[y,j]=(0,i.useState)(!1),[w,_]=(0,i.useState)(""),[C,b]=(0,i.useState)("");(0,i.useEffect)((()=>{document.title="LsCo Software - Dashboard"}),[]),(0,i.useEffect)((()=>{(async()=>{const e=JSON.parse(localStorage.getItem("login"));if(null!==localStorage.getItem("login"))try{const t=await fetch(`https://api.twitch.tv/helix/channels?broadcaster_id=${e.id}`,{headers:{"Client-Id":"9uavest5z7knsvpbip19fxqkywxz3ec"}}),a=await t.json();if(t.ok&&a.data.length>0){const e=a.data[0];u({name:e.game_name.length?e.game_name:"None",id:e.game_id.length?e.game_id:0,avatarUrl:""}),f(e.title)}}catch(t){console.error(t)}})()}),[]);const k=()=>{v(!0)},S=(e,t)=>{"clickaway"!==t&&v(!1)},Z=(e,t)=>{"clickaway"!==t&&j(!1)};return(0,m.jsxs)(h.Z,{title:"Dashboard",description:"Update your game or stream title.",children:[(0,m.jsxs)(n.ZP,{container:!0,spacing:2,children:[(0,m.jsx)(n.ZP,{item:!0,xs:12,sm:6,children:(0,m.jsx)(s.Z,{fullWidth:!0,id:"standard-basic",label:"Title",variant:"filled",value:p,onChange:e=>f(e.target.value),autoFocus:!0})}),(0,m.jsx)(n.ZP,{item:!0,xs:12,sm:6,children:(0,m.jsx)(r.Z,{value:a,options:e,getOptionLabel:e=>e.name,onChange:(e,t)=>{u(null!==t&&void 0!==t?t:{name:"",id:null,avatarUrl:""})},isOptionEqualToValue:(e,t)=>e.id===t.id,renderInput:e=>(0,m.jsx)(s.Z,{...e,fullWidth:!0,id:"standard-basic",label:"Game",variant:"filled",onChange:e=>{(async e=>{if(""!==e.trim()){const a=await fetch(`https://api.twitch.tv/helix/search/categories?query=${decodeURIComponent(e)}&first=15`,{headers:{"Client-Id":"9uavest5z7knsvpbip19fxqkywxz3ec"}}),i=await a.json();a.ok?t(i.data.map((e=>({name:e.name,id:e.id,avatarUrl:e.box_art_url.replace("52x72","30x40")})))):t([])}else t([])})(e.target.value)}}),renderOption:(e,t)=>(0,m.jsx)("li",{...e,children:(0,m.jsxs)(l.Z,{display:"flex",alignItems:"center",children:[(0,m.jsx)(o.Z,{variant:"square",src:t.avatarUrl,alt:t.name,sx:{width:30,height:40,marginRight:1}}),t.name]})})})}),(0,m.jsx)(n.ZP,{item:!0,xs:12,sm:6,children:(0,m.jsx)(c.Z,{variant:"outlined",fullWidth:!0,onClick:async()=>{const e=JSON.parse(localStorage.getItem("login"));if(!e)return _("Log in to update your title & game."),void k();const t=decodeURIComponent(e.id);try{var i;const n=await fetch(`https://api.twitch.tv/helix/channels?broadcaster_id=${t}`,{method:"PATCH",headers:{Authorization:"Bearer "+e.access_token,"Client-ID":e.client_id,"Content-Type":"application/json"},body:JSON.stringify({game_id:null!==(i=a.id)&&void 0!==i?i:0,title:p.length?p:" "})});if(n.ok)b("Successfully updated your title & game."),j(!0);else{const e=await n.json();_(e.message),k()}}catch(n){console.error(n)}},children:"Update"})})]}),(0,m.jsx)(d.Z,{open:x,autoHideDuration:2500,onClose:S,children:(0,m.jsx)(g,{onClose:S,severity:"error",sx:{width:"100%"},children:w})}),(0,m.jsx)(d.Z,{open:y,autoHideDuration:1500,onClose:Z,children:(0,m.jsx)(g,{onClose:Z,severity:"success",sx:{width:"100%"},children:C})})]})}}}]);
//# sourceMappingURL=436.2bde8e4b.chunk.js.map