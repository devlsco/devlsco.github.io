"use strict";(self.webpackChunkpage=self.webpackChunkpage||[]).push([[419],{5419:function(e,t,o){o.r(t);var a=o(2791),n=o(7564),r=o(6787),s=o(184);const i=e=>e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."),c=async(e,t)=>{const o=await fetch("https://api.modscanner.com/twitch/user/"+e);if(!o.ok)return[];return[...(await o.json()).moderating.map((e=>e.id)),t]};t.default=()=>{const[e,t]=(0,a.useState)(0),[o,u]=(0,a.useState)(0),[d,l]=(0,a.useState)(0),[m,h]=(0,a.useState)(0);return(0,a.useEffect)((()=>{document.title="LsCo Software - Modding Marathon",document.body.style.backgroundColor="initial !important";(async()=>{const e=new URLSearchParams(window.location.search).get("access_token"),o=new URLSearchParams(window.location.search).get("login"),a=new URLSearchParams(window.location.search).get("id"),s=new URLSearchParams(window.location.search).get("persub"),i=(await c(o,a)).map((e=>`chat_moderator_actions.${a}.${e}`)),d=new n.p;d.onDisconnect(((e,t)=>{console.log("[PubSub] Disconnected",t)})),d.onListenError(((e,t)=>{console.error(`[PubSub] An error has occurred on topic '${e}':`,t)})),d.onConnect((async()=>{console.log("[PubSub] Connected"),await d.listen(i,e)})),d.onMessage((async(e,t)=>{if("chat_moderator_actions"===e.split(".").shift()&&t.data.created_by_user_id===a)switch(t.data.moderation_action){case"delete":case"timeout":case"ban":u((e=>e+1)),h((e=>e+1))}}));const m=new r.A({channels:[o]});m.onMessage(((e,o,n,r)=>{if(r.userInfo.userId===a){var s;if(!n.startsWith("!"))return;const e=n.slice("!".length).trim().split(/ +/);var i;if("overlay"===(null===(s=e[0])||void 0===s?void 0:s.toLowerCase()))switch(null===(i=e[1])||void 0===i?void 0:i.toLowerCase()){case"reset":return localStorage.setItem("marathon_subs",0),localStorage.setItem("marathon_moderation_action_need",0),localStorage.setItem("marathon_moderation_action",0),u(0),l(0),void t(0);case"subs":if(!e[2])return;if(!/^[0-9]+$/.test(e[2]))return;return t(Number(e[2])),void localStorage.setItem("marathon_subs",Number(e[2]));case"mod_actions":if(!e[2])return;if(!/^[0-9]+$/.test(e[2]))return;return u(Number(e[2])),void localStorage.setItem("marathon_moderation_action",Number(e[2]));case"mod_actions_need":if(!e[2])return;if(!/^[0-9]+$/.test(e[2]))return;return l(Number(e[2])),void localStorage.setItem("marathon_moderation_action_need",Number(e[2]));case"mod_actions_total":if(!e[2])return;if(!/^[0-9]+$/.test(e[2]))return;return h(Number(e[2])),void localStorage.setItem("marathon_moderation_action_total",Number(e[2]));default:return}}})),m.onbi((()=>{})),m.onSub((()=>{t((e=>e+1)),l((e=>e+(s||5)))})),m.onResub((()=>{t((e=>e+1)),l((e=>e+(s||5)))})),m.onSubGift((()=>{t((e=>e+1)),l((e=>e+(s||5)))})),d.connect(),m.connect()})()}),[]),(0,s.jsxs)("div",{style:{fontFamily:"Comic Neue",fontSize:"xx-large",textAlign:"end",verticalAlign:"middle",textShadow:"4px 4px 6px rgba(0, 0, 0, 0.4)",margin:"2.5rem"},children:["Subs: ",i(e)," - Mod Actions: ",i(o),"/",i(Number(d))," - Total:"," ",i(m)]})}}}]);
//# sourceMappingURL=419.4559e56c.chunk.js.map