"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[169],{2169:function(e,t,a){a.r(t);var i=a(1979),n=a(4507),o=a(1889),s=a(6377),l=a(7391),r=a(8870),c=a(3044),d=a(8096),g=a(4925),h=a(8837),u=a(3786),m=a(890),p=a(3469),w=a(6151),f=a(4746),S=a(2791),b=a(184);const x=(0,i.Z)({palette:{mode:"dark"}}),y=[{value:25,label:"25"},{value:100,label:"100"},{value:250,label:"250"},{value:500,label:"500"},{value:750,label:"750"},{value:1e3,label:"1000"}];function I(e){return`${e}ms`}function j(e,t){let a=[];for(let i=0;i<e.length;i+=t){let n=e.slice(i,i+t);a.push(n)}return a}t.default=()=>{const[e,t]=(0,S.useState)(""),[a,i]=(0,S.useState)(null),[v,_]=(0,S.useState)(null),[C,O]=(0,S.useState)(""),[N,$]=(0,S.useState)(""),[k,J]=(0,S.useState)(100),[E,Z]=(0,S.useState)([]);async function P(e,t){try{await Promise.all(j(t,100).map((async e=>{const a=await fetch(`https://api.twitch.tv/helix/users?login=${e.map((e=>e.login)).join("&login=")}`,{headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("login")).access_token,"Client-ID":JSON.parse(localStorage.getItem("login")).client_id}}),i=await a.json();if(!a.ok)throw new Error(`API Error -> Status: ${i.error}, ${i.status} - ${i.message}`);return i.data.forEach((e=>{const a=t.find((t=>t.login===e.login));a&&(a.id=e.id)})),i.data.map((e=>e.id))})));for(let a=0;a<t.length;a++){const i=t[a];fetch(`https://api.twitch.tv/helix/moderation/bans?broadcaster_id=${e}&moderator_id=${JSON.parse(localStorage.getItem("login")).id}`,{method:"POST",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("login")).access_token,"Client-ID":JSON.parse(localStorage.getItem("login")).client_id,"Content-Type":"application/json"},body:JSON.stringify({data:{user_id:i.id,reason:i.reason}})}),await new Promise((e=>setTimeout(e,k)))}}catch(a){throw console.log(a),new Error(`Error: ${a.message}`)}}async function T(e,t){try{await Promise.all(j(t,100).map((async e=>{const a=await fetch(`https://api.twitch.tv/helix/users?login=${e.map((e=>e.login)).join("&login=")}`,{headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("login")).access_token,"Client-ID":JSON.parse(localStorage.getItem("login")).client_id}}),i=await a.json();if(!a.ok)throw new Error(`API Error -> Status: ${i.error}, ${i.status} - ${i.message}`);return i.data.forEach((e=>{const a=t.find((t=>t.login===e.login));a&&(a.id=e.id)})),i.data.map((e=>e.id))})));for(let a=0;a<t.length;a++){const i=t[a];fetch(`https://api.twitch.tv/helix/moderation/bans?broadcaster_id=${e}&moderator_id=${JSON.parse(localStorage.getItem("login")).id}`,{method:"POST",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("login")).access_token,"Client-ID":JSON.parse(localStorage.getItem("login")).client_id,"Content-Type":"application/json"},body:JSON.stringify({data:{user_id:i.id,duration:Number(i.duration),reason:i.reason}})}),await new Promise((e=>setTimeout(e,k)))}}catch(a){throw console.log(a),new Error(`Error: ${a.message}`)}}async function L(e,t){try{for(let a=0;a<t.length;a++){const i=t[a];fetch(`https://api.twitch.tv/helix/moderation/bans?broadcaster_id=${e}&moderator_id=${JSON.parse(localStorage.getItem("login")).id}`,{method:"POST",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("login")).access_token,"Client-ID":JSON.parse(localStorage.getItem("login")).client_id,"Content-Type":"application/json"},body:JSON.stringify({data:{user_id:i.id,reason:i.reason}})}),await new Promise((e=>setTimeout(e,k)))}}catch(a){throw console.log(a),new Error(`Error: ${a.message}`)}}async function A(e,t){try{for(let a=0;a<t.length;a++){const i=t[a];fetch(`https://api.twitch.tv/helix/moderation/bans?broadcaster_id=${e}&moderator_id=${JSON.parse(localStorage.getItem("login")).id}`,{method:"POST",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("login")).access_token,"Client-ID":JSON.parse(localStorage.getItem("login")).client_id,"Content-Type":"application/json"},body:JSON.stringify({data:{user_id:i.id,duration:Number(i.duration),reason:i.reason}})}),await new Promise((e=>setTimeout(e,k)))}}catch(a){throw console.log(a),new Error(`Error: ${a.message}`)}}async function D(e,t){try{await Promise.all(j(t,100).map((async e=>{const a=await fetch(`https://api.twitch.tv/helix/users?login=${e.map((e=>e.login)).join("&login=")}`,{headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("login")).access_token,"Client-ID":JSON.parse(localStorage.getItem("login")).client_id}}),i=await a.json();if(!a.ok)throw new Error(`API Error -> Status: ${i.error}, ${i.status} - ${i.message}`);return i.data.forEach((e=>{const a=t.find((t=>t.login===e.login));a&&(a.id=e.id)})),i.data.map((e=>e.id))})));for(let a=0;a<t.length;a++){const i=t[a];fetch(`https://api.twitch.tv/helix/moderation/bans?broadcaster_id=${e}&moderator_id=${JSON.parse(localStorage.getItem("login")).id}&user_id=${i.id}`,{method:"DELETE",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("login")).access_token,"Client-ID":JSON.parse(localStorage.getItem("login")).client_id,"Content-Type":"application/json"}}),await new Promise((e=>setTimeout(e,k)))}}catch(a){throw console.log(a),new Error(`Error: ${a.message}`)}}async function B(e,t){try{for(let a=0;a<t.length;a++){const i=t[a];fetch(`https://api.twitch.tv/helix/moderation/bans?broadcaster_id=${e}&moderator_id=${JSON.parse(localStorage.getItem("login")).id}&user_id=${i.id}`,{method:"DELETE",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("login")).access_token,"Client-ID":JSON.parse(localStorage.getItem("login")).client_id,"Content-Type":"application/json"}}),await new Promise((e=>setTimeout(e,k)))}}catch(a){throw console.log(a),new Error(`Error: ${a.message}`)}}(0,S.useEffect)((()=>{document.title="LsCo Software - Filesay"}),[]),(0,S.useEffect)((()=>{localStorage.getItem("login")||null||(i("Log in to get started."),_(null))}),[]);return(0,b.jsx)(f.Z,{title:"Filesay",description:"Ban/timeout multiple users in a specific channel.",children:(0,b.jsxs)(o.ZP,{container:!0,spacing:2,alignItems:"center",children:[(0,b.jsx)(o.ZP,{item:!0,xs:12,sm:6,children:(0,b.jsx)(n.Z,{theme:x,children:(0,b.jsx)(s.Z,{options:E,getOptionLabel:e=>e.name,onChange:(e,t)=>{$(t)},renderInput:e=>(0,b.jsx)(l.Z,{...e,fullWidth:!0,id:"outlined-basic",label:"Channel",variant:"outlined",onChange:e=>{(async e=>{if(!localStorage.getItem("login"))return Z([]);if(""!==e.trim()){const t=await fetch(`https://api.twitch.tv/helix/search/channels?query=${e}&first=25`,{headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("login")).access_token,"Client-ID":JSON.parse(localStorage.getItem("login")).client_id}}),a=await t.json();t.ok?Z(a.data.map((e=>({name:e.display_name,id:e.id,avatarUrl:e.thumbnail_url.replace("300x300","50x50")})))):Z([])}else Z([])})(e.target.value)}}),renderOption:(e,t)=>(0,b.jsx)("li",{...e,children:(0,b.jsxs)(r.Z,{display:"flex",alignItems:"center",children:[(0,b.jsx)(c.Z,{src:t.avatarUrl,alt:t.name,sx:{width:25,height:25,marginRight:1}}),t.name]})})})})}),(0,b.jsx)(o.ZP,{item:!0,xs:12,sm:6,children:(0,b.jsx)(n.Z,{theme:x,children:(0,b.jsxs)(d.Z,{fullWidth:!0,id:"outlined-basic",variant:"outlined",children:[(0,b.jsx)(g.Z,{id:"type-label",children:"Type"}),(0,b.jsxs)(h.Z,{label:"Type",value:C,onChange:e=>O(e.target.value),labelId:"type-label",id:"type-select",children:[(0,b.jsx)(u.Z,{value:"filesay",children:"Filesay"}),(0,b.jsx)(u.Z,{value:"ban-list-name",children:"Ban List (Name)"}),(0,b.jsx)(u.Z,{value:"unban-list-name",children:"Unban List (Name)"}),(0,b.jsx)(u.Z,{value:"ban-list-id",children:"Ban List (ID)"}),(0,b.jsx)(u.Z,{value:"unban-list-id",children:"Unban List (ID)"})]})]})})}),(0,b.jsx)(o.ZP,{item:!0,xs:12,children:(0,b.jsx)(n.Z,{theme:x,children:(0,b.jsx)(l.Z,{fullWidth:!0,multiline:!0,rows:10,id:"outlined-basic",label:"Text",variant:"outlined",value:e,onChange:e=>t(e.target.value)})})}),(0,b.jsxs)(o.ZP,{item:!0,xs:12,style:{textAlign:"right"},children:["Lines. (",e.split("\n").length,"/500)"]}),(0,b.jsx)(n.Z,{theme:x,children:(0,b.jsxs)(o.ZP,{item:!0,xs:12,children:[(0,b.jsx)(m.Z,{gutterBottom:!0,children:"Output speed in ms (Milliseconds)"}),(0,b.jsx)(d.Z,{fullWidth:!0,variant:"filled",children:(0,b.jsx)(p.ZP,{"aria-label":"Delay",value:k,onChange:(e,t)=>{J(t)},getAriaValueText:I,step:null,valueLabelDisplay:"auto",marks:y,min:y[0].value,max:y[y.length-1].value})})]})}),(0,b.jsx)(o.ZP,{item:!0,xs:12,children:(0,b.jsx)(w.Z,{variant:"contained",fullWidth:!0,onClick:async()=>{if(!localStorage.getItem("login"))return i(null),void _("Log in to get started.");if(!N)return i(null),void _("You must specify a channel");if(!C)return i(null),void _("You must specify a filesay type");if(!e.trim())return i(null),void _("You must specify a filesay list");try{const t=N.id,a=e.split(/\r?\n/).map((e=>e.trim()));let n;if(a.length>=500)return i(null),void _("You have too many lines.");i(null),_(null),n="ban-list-id"===C?4:"unban-list-id"===C?3:"ban-list-name"===C?2:"unban-list-name"===C?1:0;const o=[],s=[],l=[],r=[],c=[],d=[],g=[];for(let e=0;e<a.length;e++){const t=a[e];if(t)switch(n){case 0:switch(!0){case null!==t.match(/^(\.|\/)timeout\s\w+\s(\d+)(\s.+)?/i):{const[,e,a,...i]=t.split(/\s+/);s.find((t=>t.login===e.toLowerCase()))||s.push({login:e.toLowerCase(),duration:a,reason:i.join(" ")||""});break}case null!==t.match(/^(\.|\/)ban\s\w+(\s.+)?/i):{const[,e,...a]=t.split(/\s+/);c.find((t=>t.login===e.toLowerCase()))||c.push({login:e.toLowerCase(),reason:a.join(" ")||""});break}case null!==t.match(/^(\.|\/)unban\s\w+/i)||null!==t.match(/^(\.|\/)untimeout\s\w+/i):{const[,e]=t.split(/\s+/);r.find((t=>t.login===e.toLowerCase()))||r.push({login:e.toLowerCase()});break}case null!==t.match(/^(\.|\/)timeoutid\s\w+\s(\d+)(\s.+)?/i):{const[,e,a,...i]=t.split(/\s+/);l.find((t=>t.id===e))||l.push({id:e,duration:a,reason:i.join(" ")||""});break}case null!==t.match(/^(\.|\/)banid\s\w+(\s.+)?/i):{const[,e,...a]=t.split(/\s+/);g.find((t=>t.id===e))||g.push({id:e,reason:a.join(" ")||""});break}case null!==t.match(/^(\.|\/)unbanid\s\w+/i)||null!==t.match(/^(\.|\/)untimeoutid\s\w+/i):{const[,e]=t.split(/\s+/);d.find((t=>t.id===e))||d.push({id:e});break}default:o.push({message:t})}break;case 1:{const[e]=t.split(/\s+/);r.find((t=>t.login===e.toLowerCase()))||r.push({login:e.toLowerCase()});break}case 2:{const[e,...a]=t.split(/\s+/);c.find((t=>t.login===e.toLowerCase()))||c.push({login:e.toLowerCase(),reason:a?a.join(" "):"Ban-list"});break}case 3:{const[e]=t.split(/\s+/);r.find((t=>t.id===e))||d.push({id:e});break}case 4:{const[e,...a]=t.split(/\s+/);c.find((t=>t.id===e))||g.push({id:e,reason:a?a.join(" "):"Ban-list"});break}}}console.log("Bans",c,c.length),console.log("Unbans",r,r.length),console.log("Bans (ID)",g,g.length),console.log("Unbans (ID)",d,d.length),console.log("Timeouts",s,s.length),console.log("Timeouts (ID)",l,l.length),console.log("Messages",o,o.length),await Promise.all([P(t,c),D(t,r),L(t,g),B(t,d),T(t,s),A(t,l)]);const h=await async function(e){if(!e)return null;const t=await fetch(`https://api.twitch.tv/helix/users?id=${encodeURIComponent(e)}`,{responseType:"json",throwHttpErrors:!1,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("login")).access_token,"Client-ID":JSON.parse(localStorage.getItem("login")).client_id}}),a=await t.json();if(!t.ok)throw new Error(a.message?`${a.error}, ${a.message}`:t.statusText);if(!a.data[0])throw new Error("Login not found.");return a.data[0].login}(JSON.parse(localStorage.getItem("login")).id);if(o.length){const e=new WebSocket("wss://irc-ws.chat.twitch.tv");e.onopen=async()=>{e.send("CAP REQ :twitch.tv/membership twitch.tv/tags twitch.tv/commands"),e.send("PASS oauth:"+JSON.parse(localStorage.getItem("login")).access_token),e.send("NICK "+h);for(let t=0;t<o.length;t++){const a=o[t].message;e.send(`PRIVMSG #${N.name.toLowerCase()} :${a}`),await new Promise((e=>setTimeout(e,k))),t===o.length-1&&e.close()}}}}catch(t){return console.log(t),i(null),void _(t.message)}},children:"Send"})}),(0,b.jsxs)(o.ZP,{item:!0,xs:12,children:[v&&(0,b.jsx)(m.Z,{variant:"body2",style:{color:"red",marginTop:"10px",textAlign:"center"},children:v}),a&&(0,b.jsx)(m.Z,{variant:"body2",style:{marginTop:"10px",textAlign:"center"},children:a})]})]})})}}}]);
//# sourceMappingURL=169.66ff28ed.chunk.js.map