"use strict";(self.webpackChunkpage=self.webpackChunkpage||[]).push([[436],{1436:function(e,t,a){a.r(t);var o=a(1979),n=a(4507),l=a(2791),r=a(1889),i=a(7391),s=a(6377),c=a(8870),d=a(3044),u=a(6151),h=a(625),p=a(4070),g=a(6999),m=a(184);const v=(0,o.Z)({palette:{mode:"dark"}}),f=l.forwardRef((function(e,t){return(0,m.jsx)(p.Z,{elevation:6,ref:t,variant:"filled",...e})}));t.default=()=>{const[e,t]=(0,l.useState)([]),[a,o]=(0,l.useState)({name:"",id:null,avatarUrl:""}),[p,x]=(0,l.useState)(""),[Z,S]=(0,l.useState)(!1),[C,j]=(0,l.useState)(!1),[y,w]=(0,l.useState)(""),[A,I]=(0,l.useState)("");(0,l.useEffect)((()=>{document.title="LsCo Software - Dashboard"}),[]),(0,l.useEffect)((()=>{(async()=>{const e=JSON.parse(localStorage.getItem("login"));if(null!==localStorage.getItem("login"))try{const t=await fetch(`https://api.twitch.tv/helix/channels?broadcaster_id=${e.id}`,{headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("login")).access_token,"Client-ID":JSON.parse(localStorage.getItem("login")).client_id}}),a=await t.json();if(t.ok&&a.data.length>0){const e=a.data[0];o({name:e.game_name.length?e.game_name:"None",id:e.game_id.length?e.game_id:0,avatarUrl:""}),x(e.title)}}catch(t){console.error(t)}})()}),[]);const b=()=>{S(!0)},k=(e,t)=>{"clickaway"!==t&&S(!1)},M=(e,t)=>{"clickaway"!==t&&j(!1)};return(0,m.jsxs)(g.Z,{title:"Dashboard",description:"Here you can update the stream or get info about a user.",children:[(0,m.jsxs)(r.ZP,{container:!0,spacing:2,children:[(0,m.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,m.jsx)(n.Z,{theme:v,children:(0,m.jsx)(i.Z,{fullWidth:!0,id:"outlined-basic",label:"Title",variant:"outlined",value:p,onChange:e=>x(e.target.value),autoFocus:!0})})}),(0,m.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,m.jsx)(n.Z,{theme:v,children:(0,m.jsx)(s.Z,{value:a,options:e,getOptionLabel:e=>e.name,onChange:(e,t)=>{o(null!==t&&void 0!==t?t:{name:"",id:null,avatarUrl:""})},isOptionEqualToValue:(e,t)=>e.id===t.id,renderInput:e=>(0,m.jsx)(i.Z,{...e,fullWidth:!0,id:"outlined-basic",label:"Game",variant:"outlined",onChange:e=>{(async e=>{if(!localStorage.getItem("login"))return t([]);if(""!==e.trim()){const a=await fetch(`https://api.twitch.tv/helix/search/categories?query=${decodeURIComponent(e)}&first=15`,{headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("login")).access_token,"Client-ID":JSON.parse(localStorage.getItem("login")).client_id}}),o=await a.json();a.ok?t(o.data.map((e=>({name:e.name,id:e.id,avatarUrl:e.box_art_url.replace("500","520")})))):t([])}else t([])})(e.target.value)}}),renderOption:(e,t)=>(0,m.jsx)("li",{...e,children:(0,m.jsxs)(c.Z,{display:"flex",alignItems:"center",children:[(0,m.jsx)(d.Z,{variant:"square",src:t.avatarUrl,alt:t.name,sx:{width:35,height:45,marginRight:1}}),t.name]})})})})}),(0,m.jsx)(r.ZP,{item:!0,children:(0,m.jsx)(u.Z,{variant:"text",fullWidth:!0,onClick:async()=>{const e=JSON.parse(localStorage.getItem("login"));if(!e)return w("Log in with your Twitch account to use this tool"),void b();const t=decodeURIComponent(e.id);try{var o;const n=await fetch(`https://api.twitch.tv/helix/channels?broadcaster_id=${t}`,{method:"PATCH",headers:{Authorization:"Bearer "+e.access_token,"Client-ID":e.client_id,"Content-Type":"application/json"},body:JSON.stringify({game_id:null!==(o=a.id)&&void 0!==o?o:0,title:p.length?p:" "})});if(n.ok)I("Successfully updated your title & game."),j(!0);else{const e=await n.json();w(e.message),b()}}catch(n){console.error(n)}},children:"Update"})})]}),(0,m.jsx)(h.Z,{open:Z,autoHideDuration:2500,onClose:k,children:(0,m.jsx)(f,{onClose:k,severity:"error",sx:{width:"100%"},children:y})}),(0,m.jsx)(h.Z,{open:C,autoHideDuration:1500,onClose:M,children:(0,m.jsx)(f,{onClose:M,severity:"success",sx:{width:"100%"},children:A})})]})}},4070:function(e,t,a){a.d(t,{Z:function(){return z}});var o=a(3366),n=a(7462),l=a(2791),r=a(8182),i=a(4419),s=a(2065),c=a(7630),d=a(3736),u=a(4036),h=a(5527),p=a(5878),g=a(1217);function m(e){return(0,g.Z)("MuiAlert",e)}var v=(0,p.Z)("MuiAlert",["root","action","icon","message","filled","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),f=a(3400),x=a(9201),Z=a(184),S=(0,x.Z)((0,Z.jsx)("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),C=(0,x.Z)((0,Z.jsx)("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),j=(0,x.Z)((0,Z.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),y=(0,x.Z)((0,Z.jsx)("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),w=a(8799);const A=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],I=(0,c.ZP)(h.Z,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t[a.variant],t[`${a.variant}${(0,u.Z)(a.color||a.severity)}`]]}})((e=>{let{theme:t,ownerState:a}=e;const o="light"===t.palette.mode?s._j:s.$n,l="light"===t.palette.mode?s.$n:s._j,r=a.color||a.severity;return(0,n.Z)({},t.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px"},r&&"standard"===a.variant&&{color:t.vars?t.vars.palette.Alert[`${r}Color`]:o(t.palette[r].light,.6),backgroundColor:t.vars?t.vars.palette.Alert[`${r}StandardBg`]:l(t.palette[r].light,.9),[`& .${v.icon}`]:t.vars?{color:t.vars.palette.Alert[`${r}IconColor`]}:{color:t.palette[r].main}},r&&"outlined"===a.variant&&{color:t.vars?t.vars.palette.Alert[`${r}Color`]:o(t.palette[r].light,.6),border:`1px solid ${(t.vars||t).palette[r].light}`,[`& .${v.icon}`]:t.vars?{color:t.vars.palette.Alert[`${r}IconColor`]}:{color:t.palette[r].main}},r&&"filled"===a.variant&&(0,n.Z)({fontWeight:t.typography.fontWeightMedium},t.vars?{color:t.vars.palette.Alert[`${r}FilledColor`],backgroundColor:t.vars.palette.Alert[`${r}FilledBg`]}:{backgroundColor:"dark"===t.palette.mode?t.palette[r].dark:t.palette[r].main,color:t.palette.getContrastText(t.palette[r].main)}))})),b=(0,c.ZP)("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(e,t)=>t.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),k=(0,c.ZP)("div",{name:"MuiAlert",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),M=(0,c.ZP)("div",{name:"MuiAlert",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),$={success:(0,Z.jsx)(S,{fontSize:"inherit"}),warning:(0,Z.jsx)(C,{fontSize:"inherit"}),error:(0,Z.jsx)(j,{fontSize:"inherit"}),info:(0,Z.jsx)(y,{fontSize:"inherit"})};var z=l.forwardRef((function(e,t){var a,l,s,c,h,p;const g=(0,d.Z)({props:e,name:"MuiAlert"}),{action:v,children:x,className:S,closeText:C="Close",color:j,components:y={},componentsProps:z={},icon:_,iconMapping:L=$,onClose:N,role:O="alert",severity:P="success",slotProps:R={},slots:B={},variant:H="standard"}=g,W=(0,o.Z)(g,A),T=(0,n.Z)({},g,{color:j,severity:P,variant:H}),U=(e=>{const{variant:t,color:a,severity:o,classes:n}=e,l={root:["root",`${t}${(0,u.Z)(a||o)}`,`${t}`],icon:["icon"],message:["message"],action:["action"]};return(0,i.Z)(l,m,n)})(T),D=null!=(a=null!=(l=B.closeButton)?l:y.CloseButton)?a:f.Z,E=null!=(s=null!=(c=B.closeIcon)?c:y.CloseIcon)?s:w.Z,J=null!=(h=R.closeButton)?h:z.closeButton,V=null!=(p=R.closeIcon)?p:z.closeIcon;return(0,Z.jsxs)(I,(0,n.Z)({role:O,elevation:0,ownerState:T,className:(0,r.Z)(U.root,S),ref:t},W,{children:[!1!==_?(0,Z.jsx)(b,{ownerState:T,className:U.icon,children:_||L[P]||$[P]}):null,(0,Z.jsx)(k,{ownerState:T,className:U.message,children:x}),null!=v?(0,Z.jsx)(M,{ownerState:T,className:U.action,children:v}):null,null==v&&N?(0,Z.jsx)(M,{ownerState:T,className:U.action,children:(0,Z.jsx)(D,(0,n.Z)({size:"small","aria-label":C,title:C,color:"inherit",onClick:N},J,{children:(0,Z.jsx)(E,(0,n.Z)({fontSize:"small"},V))}))}):null]}))}))}}]);
//# sourceMappingURL=436.53afda43.chunk.js.map