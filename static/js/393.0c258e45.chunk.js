"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[393],{3393:function(e,t,a){a.r(t);var i=a(2791),n=a(1889),s=a(6377),r=a(7391),o=a(8870),l=a(3044),d=a(6151),c=a(8096),h=a(4925),u=a(8837),p=a(3786),m=a(890),v=a(4746),f=a(184);t.default=()=>{const[e,t]=(0,i.useState)(""),[a,g]=(0,i.useState)(""),[x,b]=(0,i.useState)(""),[y,Z]=(0,i.useState)([]),[j,k]=(0,i.useState)(""),[I,$]=(0,i.useState)(""),[w,C]=(0,i.useState)(null),[_,S]=(0,i.useState)([]),[O,P]=(0,i.useState)("");(0,i.useEffect)((()=>{document.title="LsCo Software - Channel Manager"}),[]);const N=()=>{const e=(JSON.parse(localStorage.getItem("tokens"))||[]).map((e=>{let{login:t,id:a}=e;return{value:a,label:`${t} - ID: ${a}`}}));e.length>=1?Z(e):Z([{value:"",label:"No Channels"}])},A=async e=>{if(""!==e.trim()){const t=await fetch(`https://api.twitch.tv/helix/search/channels?query=${e}&first=25`,{headers:{"Client-Id":"9uavest5z7knsvpbip19fxqkywxz3ec"}}),a=await t.json();t.ok?S(a.data.map((e=>({name:`${e.display_name} - ID: ${e.id}`,avatarUrl:e.thumbnail_url})))):S([])}else S([])};(0,i.useEffect)((()=>{N()}),[]),(0,i.useEffect)((()=>{g(""),b("");const e=async()=>{if(!j)return g("No channel specified"),void b("");const e=JSON.parse(localStorage.getItem("tokens"))||[],t=e.findIndex((e=>e.id===j)),a=await fetch(`https://api.twitch.tv/helix/channels/vips?broadcaster_id=${e[t].id}&user_id=${O.split("- ID: ")[1]}`,{method:"DELETE",headers:{Authorization:`Bearer ${e[t].access_token}`,"Client-Id":e[t].client_id}});if(!a.ok){const e=await a.json();return g(e.message),void b("")}b(""),b(`Successfully removed ${O.split("- ID: ")[0]} as VIP in ${e[t].login}`)},t=async()=>{if(!j)return g("No channel specified"),void b("");const e=JSON.parse(localStorage.getItem("tokens"))||[],t=e.findIndex((e=>e.id===j)),a=await fetch(`https://api.twitch.tv/helix/moderation/moderators?broadcaster_id=${e[t].id}&user_id=${O.split("- ID: ")[1]}`,{method:"DELETE",headers:{Authorization:`Bearer ${e[t].access_token}`,"Client-Id":e[t].client_id}});if(!a.ok){const e=await a.json();return g(e.message),void b("")}b(""),b(`Successfully removed ${O.split("- ID: ")[0]} as Moderator in ${e[t].login}`)},a=async()=>{if(!j)return g("No channel specified"),void b("");const e=JSON.parse(localStorage.getItem("tokens"))||[],t=e.findIndex((e=>e.id===j)),a=await fetch(`https://api.twitch.tv/helix/channels/vips?broadcaster_id=${e[t].id}&user_id=${O.split("- ID: ")[1]}`,{method:"POST",headers:{Authorization:`Bearer ${e[t].access_token}`,"Client-Id":e[t].client_id}});if(!a.ok){const e=await a.json();return g(e.message),void b("")}b(""),b(`Successfully added ${O.split("- ID: ")[0]} as VIP in ${e[t].login}`)},c=async()=>{if(!j)return g("No channel specified"),void b("");const e=JSON.parse(localStorage.getItem("tokens"))||[],t=e.findIndex((e=>e.id===j)),a=await fetch(`https://api.twitch.tv/helix/moderation/moderators?broadcaster_id=${e[t].id}&user_id=${O.split("- ID: ")[1]}`,{method:"POST",headers:{Authorization:`Bearer ${e[t].access_token}`,"Client-Id":e[t].client_id}});if(!a.ok){const e=await a.json();return g(e.message),void b("")}b(""),b(`Successfully added ${O.split("- ID: ")[0]} as Moderator in ${e[t].login}`)};(async()=>{if("add-moderator"===I)C((0,f.jsxs)(i.Fragment,{children:[(0,f.jsx)(n.ZP,{item:!0,xs:12,children:(0,f.jsx)(s.Z,{options:_,getOptionLabel:e=>e.name,onChange:(e,t)=>{P(t)},renderInput:e=>(0,f.jsx)(r.Z,{...e,fullWidth:!0,id:"standard-basic",label:"User",variant:"filled",onChange:e=>{A(e.target.value)}}),renderOption:(e,t)=>(0,f.jsx)("li",{...e,children:(0,f.jsxs)(o.Z,{display:"flex",alignItems:"center",children:[(0,f.jsx)(l.Z,{src:t.avatarUrl,alt:t.name,sx:{width:25,height:25,marginRight:1}}),t.name]})})})}),(0,f.jsx)(n.ZP,{item:!0,xs:12,children:(0,f.jsx)(d.Z,{variant:"contained",fullWidth:!0,onClick:c,children:"Add"})})]}));else if("add-vip"===I)C((0,f.jsxs)(i.Fragment,{children:[(0,f.jsx)(n.ZP,{item:!0,xs:12,children:(0,f.jsx)(s.Z,{options:_,getOptionLabel:e=>e.name,onChange:(e,t)=>{P(t)},renderInput:e=>(0,f.jsx)(r.Z,{...e,fullWidth:!0,id:"standard-basic",label:"User",variant:"filled",onChange:e=>{A(e.target.value)}}),renderOption:(e,t)=>(0,f.jsx)("li",{...e,children:(0,f.jsxs)(o.Z,{display:"flex",alignItems:"center",children:[(0,f.jsx)(l.Z,{src:t.avatarUrl,alt:t.name,sx:{width:25,height:25,marginRight:1}}),t.name]})})})}),(0,f.jsx)(n.ZP,{item:!0,xs:12,children:(0,f.jsx)(d.Z,{variant:"contained",fullWidth:!0,onClick:a,children:"Add"})})]}));else if("remove-moderator"===I){const e={options:await(async()=>{if(!j)return g("No channel specified"),b(""),[];const e=JSON.parse(localStorage.getItem("tokens"))||[],t=e.findIndex((e=>e.id===j));let a=`https://api.twitch.tv/helix/moderation/moderators?first=100&broadcaster_id=${e[t].id}`,i=null,n=[];for(;;){i&&(a=`https://api.twitch.tv/helix/moderation/moderators?first=100&broadcaster_id=${e[t].id}&after=${i}`);const s=await fetch(a,{headers:{Authorization:`Bearer ${e[t].access_token}`,"Client-Id":e[t].client_id}}),r=await s.json();if(!s.ok)return[];if(n.push(...r.data.map((e=>`${e.user_name} - ID: ${e.user_id}`))),!r.pagination||!r.pagination.cursor)break;i=r.pagination.cursor}return n})()};C((0,f.jsxs)(i.Fragment,{children:[(0,f.jsx)(n.ZP,{item:!0,xs:12,children:(0,f.jsx)(s.Z,{...e,id:"disable-close-on-select",onChange:(e,t)=>{P(t)},renderInput:e=>(0,f.jsx)(r.Z,{...e,label:"Moderator",variant:"filled"})})}),(0,f.jsx)(n.ZP,{item:!0,xs:12,children:(0,f.jsx)(d.Z,{variant:"contained",fullWidth:!0,onClick:t,children:"Remove"})})]}))}else if("remove-vip"===I){const t={options:await(async()=>{if(!j)return g("No channel specified"),b(""),[];const e=JSON.parse(localStorage.getItem("tokens"))||[],t=e.findIndex((e=>e.id===j));let a=`https://api.twitch.tv/helix/channels/vips?first=100&broadcaster_id=${e[t].id}`,i=null,n=[];for(;;){i&&(a=`https://api.twitch.tv/helix/channels/vips?first=100&broadcaster_id=${e[t].id}&after=${i}`);const s=await fetch(a,{headers:{Authorization:`Bearer ${e[t].access_token}`,"Client-Id":e[t].client_id}}),r=await s.json();if(!s.ok)return[];if(n.push(...r.data.map((e=>`${e.user_name} - ID: ${e.user_id}`))),!r.pagination||!r.pagination.cursor)break;i=r.pagination.cursor}return n})()};C((0,f.jsxs)(i.Fragment,{children:[(0,f.jsxs)(n.ZP,{item:!0,xs:12,children:[(0,f.jsx)(s.Z,{...t,id:"disable-close-on-select",onChange:(e,t)=>{P(t)},renderInput:e=>(0,f.jsx)(r.Z,{...e,label:"VIP",variant:"filled"})})," "]}),(0,f.jsx)(n.ZP,{item:!0,xs:12,children:(0,f.jsx)(d.Z,{variant:"contained",fullWidth:!0,onClick:e,children:"Remove"})})]}))}})()}),[I,_,j,O]);const D=async e=>{const t=await fetch("https://id.twitch.tv/oauth2/validate",{headers:{Authorization:`OAuth ${e}`}}),a=await t.json();if(!t.ok){if("invalid access token"===a.message)throw new Error("Invalid access token");throw new Error(a.message||"Validate token failed")}return a};return(0,f.jsx)(v.Z,{title:"Channel Manager",description:"Add or remove moderators/VIPs from a specific channel.",children:(0,f.jsxs)(n.ZP,{container:!0,spacing:2,alignItems:"center",children:[(0,f.jsx)(n.ZP,{item:!0,xs:12,children:(0,f.jsx)(r.Z,{fullWidth:!0,id:"standard-basic",label:"OAuth Token",type:"password",value:e,variant:"filled",onChange:e=>t(e.target.value)})}),(0,f.jsx)(n.ZP,{item:!0,xs:6,children:(0,f.jsx)(d.Z,{variant:"contained",style:{background:"#2196f3"},fullWidth:!0,onClick:async()=>{if(""===e.trim())return g("You must specify an OAuth Token"),void b("");try{const t=JSON.parse(localStorage.getItem("tokens"))||[],a=await D(e.replace(/^oauth[:]*/i,""));return t.find((e=>e.id===a.user_id.toLowerCase()))?(g("The channel already exists"),void b("")):(t.push({id:a.user_id,login:a.login,access_token:e.replace(/^oauth[:]*/i,""),client_id:a.client_id}),localStorage.setItem("tokens",JSON.stringify(t)),N(),b(""),void b(`Successfully added login: ${a.login} - ID: ${a.user_id}`))}catch(t){return g(t.message),void b("")}},children:"Add"})}),(0,f.jsx)(n.ZP,{item:!0,xs:6,children:(0,f.jsx)(d.Z,{variant:"contained",style:{background:"#ff0000"},fullWidth:!0,onClick:async()=>{if(!j)return g("No channel specified"),void b("");try{const e=localStorage.getItem("tokens")?JSON.parse(localStorage.getItem("tokens")):[],t=e.findIndex((e=>e.id===j));if(-1===t)return g("There are no channels"),void b("");const a=e[t];return e.splice(t,1),localStorage.setItem("tokens",JSON.stringify(e)),N(),b(""),void b(`Successfully removed login: ${a.login} - ID: ${a.id}`)}catch(e){return g(e.message),void b("")}},children:"Remove"})}),(0,f.jsx)(n.ZP,{item:!0,xs:12,children:(0,f.jsx)(d.Z,{variant:"contained",style:{background:"hsla(0, 0%, 40%, .3)",border:"1px solid #2196f3"},fullWidth:!0,onClick:async()=>{window.open("https://id.twitch.tv/oauth2/authorize?response_type=token&client_id=87q7zikx7uny69x0wkxtf8bm4kd5m2&redirect_uri=https://devlsco.de/callback&scope=channel:manage:vips+channel:manage:moderators&force_verify=true","","scrollbars=no,resizable=no,status=no,location=no,toolbar=no,menubar=no,width=0,height=0,left=-1000,top=-1000")},children:"Generate OAuth Token"})}),(0,f.jsx)(n.ZP,{item:!0,xs:6,children:(0,f.jsxs)(c.Z,{fullWidth:!0,variant:"filled",children:[(0,f.jsx)(h.Z,{id:"channel-label",children:"Channel"}),(0,f.jsx)(u.Z,{value:j,onChange:e=>k(e.target.value),labelId:"channel-label",id:"channel-select",children:y.map(((e,t)=>(0,f.jsx)(p.Z,{value:e.value,selected:1===t,children:e.label},e.value)))})]})}),(0,f.jsx)(n.ZP,{item:!0,xs:6,children:(0,f.jsxs)(c.Z,{fullWidth:!0,variant:"filled",children:[(0,f.jsx)(h.Z,{id:"type-label",children:"Type"}),(0,f.jsxs)(u.Z,{value:I,onChange:e=>$(e.target.value),labelId:"type-label",id:"type-select",children:[(0,f.jsx)(p.Z,{value:"add-moderator",children:"Add Moderator"}),(0,f.jsx)(p.Z,{value:"add-vip",children:"Add VIP"}),(0,f.jsx)(p.Z,{value:"remove-moderator",children:"Remove Moderator"}),(0,f.jsx)(p.Z,{value:"remove-vip",children:"Remove VIP"})]})]})}),w,(0,f.jsxs)(n.ZP,{item:!0,xs:12,children:[a&&(0,f.jsx)(m.Z,{variant:"body2",style:{color:"red",marginTop:"10px",textAlign:"center"},children:a}),x&&(0,f.jsx)(m.Z,{variant:"body2",style:{marginTop:"10px",textAlign:"center"},children:x})]})]})})}},3786:function(e,t,a){a.d(t,{Z:function(){return $}});var i=a(3366),n=a(7462),s=a(2791),r=a(8182),o=a(4419),l=a(2065),d=a(7630),c=a(3736),h=a(6199),u=a(533),p=a(162),m=a(2071),v=a(133),f=a(6014),g=a(9849),x=a(5878),b=a(1217);function y(e){return(0,b.Z)("MuiMenuItem",e)}var Z=(0,x.Z)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),j=a(184);const k=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],I=(0,d.ZP)(u.Z,{shouldForwardProp:e=>(0,d.FO)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.dense&&t.dense,a.divider&&t.divider,!a.disableGutters&&t.gutters]}})((e=>{let{theme:t,ownerState:a}=e;return(0,n.Z)({},t.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!a.disableGutters&&{paddingLeft:16,paddingRight:16},a.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Z.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,l.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${Z.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:(0,l.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${Z.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:(0,l.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,l.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${Z.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${Z.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`& + .${v.Z.root}`]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},[`& + .${v.Z.inset}`]:{marginLeft:52},[`& .${g.Z.root}`]:{marginTop:0,marginBottom:0},[`& .${g.Z.inset}`]:{paddingLeft:36},[`& .${f.Z.root}`]:{minWidth:36}},!a.dense&&{[t.breakpoints.up("sm")]:{minHeight:"auto"}},a.dense&&(0,n.Z)({minHeight:32,paddingTop:4,paddingBottom:4},t.typography.body2,{[`& .${f.Z.root} svg`]:{fontSize:"1.25rem"}}))}));var $=s.forwardRef((function(e,t){const a=(0,c.Z)({props:e,name:"MuiMenuItem"}),{autoFocus:l=!1,component:d="li",dense:u=!1,divider:v=!1,disableGutters:f=!1,focusVisibleClassName:g,role:x="menuitem",tabIndex:b,className:Z}=a,$=(0,i.Z)(a,k),w=s.useContext(h.Z),C=s.useMemo((()=>({dense:u||w.dense||!1,disableGutters:f})),[w.dense,u,f]),_=s.useRef(null);(0,p.Z)((()=>{l&&_.current&&_.current.focus()}),[l]);const S=(0,n.Z)({},a,{dense:C.dense,divider:v,disableGutters:f}),O=(e=>{const{disabled:t,dense:a,divider:i,disableGutters:s,selected:r,classes:l}=e,d={root:["root",a&&"dense",t&&"disabled",!s&&"gutters",i&&"divider",r&&"selected"]},c=(0,o.Z)(d,y,l);return(0,n.Z)({},l,c)})(a),P=(0,m.Z)(_,t);let N;return a.disabled||(N=void 0!==b?b:-1),(0,j.jsx)(h.Z.Provider,{value:C,children:(0,j.jsx)(I,(0,n.Z)({ref:P,role:x,tabIndex:N,component:d,focusVisibleClassName:(0,r.Z)(O.focusVisible,g),className:(0,r.Z)(O.root,Z)},$,{ownerState:S,classes:O}))})}))}}]);
//# sourceMappingURL=393.0c258e45.chunk.js.map