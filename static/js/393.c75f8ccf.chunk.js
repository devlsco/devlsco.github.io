"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[393],{3735:function(e,t,a){var i=a(2791),n=a(3967),s=a(7621),r=a(9585),l=a(890),o=a(4721),d=a(9504),c=a(184);const h={"& .MuiCardHeader-action":{mr:0}},u=(0,i.forwardRef)(((e,t)=>{let{border:a=!0,boxShadow:i,children:u,content:x=!0,contentClass:p="",contentSX:f={},darkTitle:v,secondary:m,shadow:g,sx:j={},title:k,...Z}=e;const I=(0,n.Z)();return(0,c.jsxs)(s.Z,{ref:t,...Z,sx:{border:a?"1px solid":"none",borderColor:I.palette.primary[200]+25,":hover":{boxShadow:i?g||"0 2px 14px 0 rgb(32 40 45 / 8%)":"inherit"},...j},children:[k&&(0,c.jsx)(r.Z,{sx:h,title:v?(0,c.jsx)(l.Z,{variant:"h3",children:k}):k,action:m}),k&&(0,c.jsx)(o.Z,{}),x&&(0,c.jsx)(d.Z,{sx:f,className:p,children:u}),!x&&u]})}));t.Z=u},3393:function(e,t,a){a.r(t);var i=a(2791),n=a(1889),s=a(8885),r=a(7391),l=a(6151),o=a(8096),d=a(4925),c=a(8837),h=a(3786),u=a(890),x=a(3735),p=a(184);t.default=()=>{const[e,t]=(0,i.useState)(""),[a,f]=(0,i.useState)(""),[v,m]=(0,i.useState)(""),[g,j]=(0,i.useState)([]),[k,Z]=(0,i.useState)(""),[I,y]=(0,i.useState)(""),[w,_]=(0,i.useState)(null),[b,S]=(0,i.useState)([]),[$,C]=(0,i.useState)(""),P=async()=>{if(""===e.trim())return f("You must specify an OAuth Token"),void m("");try{const t=JSON.parse(localStorage.getItem("tokens"))||[],a=await O(e.replace(/^oauth[:]*/i,""));return t.find((e=>e.id===a.user_id.toLowerCase()))?(f("The channel already exists"),void m("")):(t.push({id:a.user_id,login:a.login,access_token:e.replace(/^oauth[:]*/i,""),client_id:a.client_id}),localStorage.setItem("tokens",JSON.stringify(t)),await N(),m(""),void m(`Successfully added login: ${a.login} - ID: ${a.user_id}`))}catch(t){return f(t.message),void m("")}},N=async()=>{const e=(JSON.parse(localStorage.getItem("tokens"))||[]).map((e=>{let{login:t,id:a}=e;return{value:a,label:`${t} - ID: ${a}`}}));e.length>=1?j(e):j([{value:"",label:"No Channels"}])},A=async e=>{if(""!==e.trim()){const t=await fetch(`https://api.twitch.tv/helix/search/channels?query=${e}`,{headers:{"Client-Id":"9uavest5z7knsvpbip19fxqkywxz3ec"}}),a=await t.json();t.ok?S(a.data.map((e=>`${e.display_name} - ID: ${e.id}`))):S([])}else S([])};(0,i.useEffect)((()=>{N()}),[]),(0,i.useEffect)((()=>{f(""),m("");const e=async()=>{if(!k)return f("No channel specified"),void m("");const e=JSON.parse(localStorage.getItem("tokens"))||[],t=e.findIndex((e=>e.id===k)),a=await fetch(`https://api.twitch.tv/helix/channels/vips?broadcaster_id=${e[t].id}&user_id=${$.split("- ID: ")[1]}`,{method:"DELETE",headers:{Authorization:`Bearer ${e[t].access_token}`,"Client-Id":e[t].client_id}});if(!a.ok){const e=await a.json();return f(e.message),void m("")}m(""),m(`Successfully removed ${$.split("- ID: ")[0]} as VIP in ${e[t].login}`)},t=async()=>{if(!k)return f("No channel specified"),void m("");const e=JSON.parse(localStorage.getItem("tokens"))||[],t=e.findIndex((e=>e.id===k));console.log($);const a=await fetch(`https://api.twitch.tv/helix/moderation/moderators?broadcaster_id=${e[t].id}&user_id=${$.split("- ID: ")[1]}`,{method:"DELETE",headers:{Authorization:`Bearer ${e[t].access_token}`,"Client-Id":e[t].client_id}});if(!a.ok){const e=await a.json();return f(e.message),void m("")}m(""),m(`Successfully removed ${$.split("- ID: ")[0]} as Moderator in ${e[t].login}`)},a=async()=>{if(!k)return f("No channel specified"),void m("");const e=JSON.parse(localStorage.getItem("tokens"))||[],t=e.findIndex((e=>e.id===k)),a=await fetch(`https://api.twitch.tv/helix/channels/vips?broadcaster_id=${e[t].id}&user_id=${$.split("- ID: ")[1]}`,{method:"POST",headers:{Authorization:`Bearer ${e[t].access_token}`,"Client-Id":e[t].client_id}});if(!a.ok){const e=await a.json();return f(e.message),void m("")}m(""),m(`Successfully added ${$.split("- ID: ")[0]} as VIP in ${e[t].login}`)},o=async()=>{if(!k)return f("No channel specified"),void m("");const e=JSON.parse(localStorage.getItem("tokens"))||[],t=e.findIndex((e=>e.id===k));console.log($);const a=await fetch(`https://api.twitch.tv/helix/moderation/moderators?broadcaster_id=${e[t].id}&user_id=${$.split("- ID: ")[1]}`,{method:"POST",headers:{Authorization:`Bearer ${e[t].access_token}`,"Client-Id":e[t].client_id}});if(!a.ok){const e=await a.json();return f(e.message),void m("")}m(""),m(`Successfully added ${$.split("- ID: ")[0]} as Moderator in ${e[t].login}`)};(async()=>{if("add-moderator"===I)_((0,p.jsxs)(i.Fragment,{children:[(0,p.jsx)(n.ZP,{item:!0,xs:12,children:(0,p.jsx)(s.Z,{options:b,onChange:(e,t)=>{console.log(t),C(t)},renderInput:e=>(0,p.jsx)(r.Z,{...e,fullWidth:!0,id:"standard-basic",label:"User",variant:"filled",onChange:e=>{A(e.target.value)}})})}),(0,p.jsx)(n.ZP,{item:!0,xs:12,children:(0,p.jsx)(l.Z,{variant:"contained",fullWidth:!0,onClick:o,children:"Add"})})]}));else if("add-vip"===I)_((0,p.jsxs)(i.Fragment,{children:[(0,p.jsx)(n.ZP,{item:!0,xs:12,children:(0,p.jsx)(s.Z,{options:b,onChange:(e,t)=>{C(t)},renderInput:e=>(0,p.jsx)(r.Z,{...e,fullWidth:!0,id:"standard-basic",label:"User",variant:"filled",onChange:e=>{A(e.target.value)}})})}),(0,p.jsx)(n.ZP,{item:!0,xs:12,children:(0,p.jsx)(l.Z,{variant:"contained",fullWidth:!0,onClick:a,children:"Add"})})]}));else if("remove-moderator"===I){const e={options:await(async()=>{if(!k)return f("No channel specified"),m(""),[];const e=JSON.parse(localStorage.getItem("tokens"))||[],t=e.findIndex((e=>e.id===k)),a=await fetch("https://api.twitch.tv/helix/moderation/moderators?broadcaster_id="+e[t].id,{headers:{Authorization:`Bearer ${e[t].access_token}`,"Client-Id":e[t].client_id}}),i=await a.json();return a.ok?i.data.map((e=>`${e.user_name} - ID: ${e.user_id}`)):[]})()};_((0,p.jsxs)(i.Fragment,{children:[(0,p.jsx)(n.ZP,{item:!0,xs:12,children:(0,p.jsx)(s.Z,{...e,id:"disable-close-on-select",onChange:(e,t)=>{C(t)},renderInput:e=>(0,p.jsx)(r.Z,{...e,label:"Moderator",variant:"filled"})})}),(0,p.jsx)(n.ZP,{item:!0,xs:12,children:(0,p.jsx)(l.Z,{variant:"contained",fullWidth:!0,onClick:t,children:"Remove"})})]}))}else if("remove-vip"===I){const t={options:await(async()=>{if(!k)return f("No channel specified"),m(""),[];const e=JSON.parse(localStorage.getItem("tokens"))||[],t=e.findIndex((e=>e.id===k)),a=await fetch("https://api.twitch.tv/helix/channels/vips?broadcaster_id="+e[t].id,{headers:{Authorization:`Bearer ${e[t].access_token}`,"Client-Id":e[t].client_id}}),i=await a.json();return a.ok?i.data.map((e=>`${e.user_name} - ID: ${e.user_id}`)):[]})()};_((0,p.jsxs)(i.Fragment,{children:[(0,p.jsxs)(n.ZP,{item:!0,xs:12,children:[(0,p.jsx)(s.Z,{...t,id:"disable-close-on-select",onChange:(e,t)=>{C(t)},renderInput:e=>(0,p.jsx)(r.Z,{...e,label:"VIP",variant:"filled"})})," "]}),(0,p.jsx)(n.ZP,{item:!0,xs:12,children:(0,p.jsx)(l.Z,{variant:"contained",fullWidth:!0,onClick:e,children:"Remove"})})]}))}})()}),[I,b,k,$]);const O=async e=>{const t=await fetch("https://id.twitch.tv/oauth2/validate",{headers:{Authorization:`OAuth ${e}`}}),a=await t.json();if(!t.ok){if("invalid access token"===a.message)throw new Error("Invalid access token");throw new Error(a.message||"Validate token failed")}return a};return(0,p.jsx)(x.Z,{title:"Channel Manager",children:(0,p.jsxs)(n.ZP,{container:!0,spacing:2,alignItems:"center",children:[(0,p.jsx)(n.ZP,{item:!0,xs:12,children:(0,p.jsx)(r.Z,{fullWidth:!0,id:"standard-basic",label:"OAuth Token",type:"password",value:e,variant:"filled",onChange:e=>t(e.target.value),onKeyPress:e=>{"Enter"===e.key&&P()}})}),(0,p.jsx)(n.ZP,{item:!0,xs:6,children:(0,p.jsx)(l.Z,{variant:"contained",style:{background:"#2196f3"},fullWidth:!0,onClick:P,children:"Add"})}),(0,p.jsx)(n.ZP,{item:!0,xs:6,children:(0,p.jsx)(l.Z,{variant:"contained",style:{background:"#ff0000"},fullWidth:!0,onClick:async()=>{if(!k)return f("No channel specified"),void m("");try{const e=JSON.parse(localStorage.getItem("tokens"))||[],t=e.findIndex((e=>e.id===k));if(-1===t)return f("There are no channels"),void m("");const a=e[t];return e.splice(t,1),localStorage.setItem("tokens",JSON.stringify(e)),await N(),m(""),void m(`Successfully removed login: ${a.login} - ID: ${a.id}`)}catch(e){return f(e.message),void m("")}},children:"Remove"})}),(0,p.jsx)(n.ZP,{item:!0,xs:12,children:(0,p.jsx)(l.Z,{variant:"contained",style:{background:"hsla(0, 0%, 40%, .3)",border:"1px solid #2196f3"},fullWidth:!0,onClick:async()=>{window.open("https://id.twitch.tv/oauth2/authorize?response_type=token&client_id=gm82v3wketnmh781aqgkv2i5m4xthz&redirect_uri=https://devlsco.de/callback/&scope=chat:read+chat:edit+channel:manage:moderators+channel:manage:vips&force_verify=true","_blank","width=600,height=1000")},children:"Generate OAuth Token"})}),(0,p.jsx)(n.ZP,{item:!0,xs:6,children:(0,p.jsxs)(o.Z,{fullWidth:!0,variant:"filled",children:[(0,p.jsx)(d.Z,{id:"channel-label",children:"Channel"}),(0,p.jsx)(c.Z,{value:k,onChange:e=>Z(e.target.value),labelId:"channel-label",id:"channel-select",children:g.map(((e,t)=>(0,p.jsx)(h.Z,{value:e.value,selected:1===t,children:e.label},e.value)))})]})}),(0,p.jsx)(n.ZP,{item:!0,xs:6,children:(0,p.jsxs)(o.Z,{fullWidth:!0,variant:"filled",children:[(0,p.jsx)(d.Z,{id:"type-label",children:"Type"}),(0,p.jsxs)(c.Z,{value:I,onChange:e=>y(e.target.value),labelId:"type-label",id:"type-select",children:[(0,p.jsx)(h.Z,{value:"add-moderator",children:"Add Moderator"}),(0,p.jsx)(h.Z,{value:"add-vip",children:"Add VIP"}),(0,p.jsx)(h.Z,{value:"remove-moderator",children:"Remove Moderator"}),(0,p.jsx)(h.Z,{value:"remove-vip",children:"Remove VIP"})]})]})}),w,(0,p.jsxs)(n.ZP,{item:!0,xs:12,children:[a&&(0,p.jsx)(u.Z,{variant:"body2",style:{color:"red",marginTop:"10px",textAlign:"center"},children:a}),v&&(0,p.jsx)(u.Z,{variant:"body2",style:{marginTop:"10px",textAlign:"center"},children:v})]})]})})}}}]);
//# sourceMappingURL=393.c75f8ccf.chunk.js.map