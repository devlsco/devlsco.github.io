"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[419],{5419:function(e,t,a){a.r(t);var o=a(2791),r=a(7564),n=a(6787),s=a(184);const c=e=>e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."),i=async(e,t)=>{const a=await fetch("https://api.modscanner.com/twitch/user/"+e);if(!a.ok)return[];return[...(await a.json()).moderating.map((e=>e.id)),t]};t.default=()=>{const[e,t]=(0,o.useState)(0),[a,u]=(0,o.useState)(0),[l,m]=(0,o.useState)(0),[d,_]=(0,o.useState)(0);return(0,o.useEffect)((()=>{document.title="LsCo Software - Modding Marathon",document.body.style.backgroundColor="initial !important";(async()=>{const e=new URLSearchParams(window.location.search).get("access_token"),a=new URLSearchParams(window.location.search).get("login"),o=new URLSearchParams(window.location.search).get("id"),s=(await i(a,o)).map((e=>`chat_moderator_actions.${o}.${e}`)),c=new r.p;c.onDisconnect(((e,t)=>{console.log("[PubSub] Disconnected",t)})),c.onListenError(((e,t)=>{console.error(`[PubSub] An error has occurred on topic '${e}':`,t)})),c.onConnect((async()=>{console.log("[PubSub] Connected"),await c.listen(s,e)})),c.onMessage((async(e,t)=>{if("chat_moderator_actions"===e.split(".").shift()&&t.data.created_by_user_id===o)switch(t.data.moderation_action){case"delete":case"timeout":case"ban":u((e=>e+1)),_((e=>e+1))}}));const l=new n.A({channels:[a]});l.onMessage(((e,a,r,n)=>{if(n.userInfo.userId===o){var s;if(!r.startsWith("!"))return;const e=r.slice("!".length).trim().split(/ +/);var c;if(console.log(e),"overlay"===(null===(s=e[0])||void 0===s?void 0:s.toLowerCase()))switch(null===(c=e[1])||void 0===c?void 0:c.toLowerCase()){case"reset":return localStorage.setItem("marathon_subs",0),localStorage.setItem("marathon_moderation_action_need",0),localStorage.setItem("marathon_moderation_action",0),u(0),m(0),void t(0);case"subs":if(!e[2])return;if(!/^[0-9]+$/.test(e[2]))return;return t(Number(e[2])),void localStorage.setItem("marathon_subs",Number(e[2]));case"mod_actions":if(!e[2])return;if(!/^[0-9]+$/.test(e[2]))return;return u(Number(e[2])),void localStorage.setItem("marathon_moderation_action",Number(e[2]));case"mod_actions_need":if(!e[2])return;if(!/^[0-9]+$/.test(e[2]))return;return m(Number(e[2])),void localStorage.setItem("marathon_moderation_action_need",Number(e[2]));case"mod_actions_total":if(!e[2])return;if(!/^[0-9]+$/.test(e[2]))return;return _(Number(e[2])),void localStorage.setItem("marathon_moderation_action_total",Number(e[2]));default:return}}})),l.onSub((()=>{t((e=>e+1)),m((e=>e+(URLParams.get("countup")||5)))})),l.onResub((()=>{t((e=>e+1)),m((e=>e+(URLParams.get("countup")||5)))})),l.onSubGift((()=>{t((e=>e+1)),m((e=>e+(URLParams.get("countup")||5)))})),c.connect(),l.connect()})()}),[]),(0,s.jsxs)("div",{style:{fontFamily:"Comic Neue",fontSize:"xx-large",textAlign:"end",verticalAlign:"middle",textShadow:"4px 4px 6px rgba(0, 0, 0, 0.4)",margin:"2.5rem"},children:["Subs: ",c(e)," - Mod Actions: ",c(a),"/",c(Number(l))," - Total:"," ",c(d)]})}}}]);
//# sourceMappingURL=419.dddbe98d.chunk.js.map