"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[419],{5419:function(e,t,o){o.r(t);var a=o(2791),r=o(7564),n=o(6787),s=o(184);const c=e=>e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."),i=async(e,t)=>{const o=await fetch("https://api.modscanner.com/twitch/user/"+e);if(!o.ok)return[];return[...(await o.json()).moderating.map((e=>e.id)),t]};t.default=()=>{const[e,t]=(0,a.useState)(0),[o,u]=(0,a.useState)(0),[l,d]=(0,a.useState)(0),[m,_]=(0,a.useState)(0);return(0,a.useEffect)((()=>{document.title="LsCo Software - Modding Marathon",document.body.style.backgroundColor="initial !important";(async()=>{const e=new URLSearchParams(window.location.search).get("access_token"),o=new URLSearchParams(window.location.search).get("login"),a=new URLSearchParams(window.location.search).get("id"),s=new URLSearchParams(window.location.search).get("persub"),c=(await i(o,a)).map((e=>`chat_moderator_actions.${a}.${e}`)),l=new r.p;l.onDisconnect(((e,t)=>{console.log("[PubSub] Disconnected",t)})),l.onListenError(((e,t)=>{console.error(`[PubSub] An error has occurred on topic '${e}':`,t)})),l.onConnect((async()=>{console.log("[PubSub] Connected"),await l.listen(c,e)})),l.onMessage((async(e,t)=>{if("chat_moderator_actions"===e.split(".").shift()&&t.data.created_by_user_id===a)switch(t.data.moderation_action){case"delete":case"timeout":case"ban":u((e=>e+1)),_((e=>e+1))}}));const m=new n.A({channels:[o]});m.onMessage(((e,o,r,n)=>{if(n.userInfo.userId===a){var s;if(!r.startsWith("!"))return;const e=r.slice("!".length).trim().split(/ +/);var c;if(console.log(e),"overlay"===(null===(s=e[0])||void 0===s?void 0:s.toLowerCase()))switch(null===(c=e[1])||void 0===c?void 0:c.toLowerCase()){case"reset":return localStorage.setItem("marathon_subs",0),localStorage.setItem("marathon_moderation_action_need",0),localStorage.setItem("marathon_moderation_action",0),u(0),d(0),void t(0);case"subs":if(!e[2])return;if(!/^[0-9]+$/.test(e[2]))return;return t(Number(e[2])),void localStorage.setItem("marathon_subs",Number(e[2]));case"mod_actions":if(!e[2])return;if(!/^[0-9]+$/.test(e[2]))return;return u(Number(e[2])),void localStorage.setItem("marathon_moderation_action",Number(e[2]));case"mod_actions_need":if(!e[2])return;if(!/^[0-9]+$/.test(e[2]))return;return d(Number(e[2])),void localStorage.setItem("marathon_moderation_action_need",Number(e[2]));case"mod_actions_total":if(!e[2])return;if(!/^[0-9]+$/.test(e[2]))return;return _(Number(e[2])),void localStorage.setItem("marathon_moderation_action_total",Number(e[2]));default:return}}})),m.onSub((()=>{t((e=>e+1)),d((e=>e+(s||5)))})),m.onResub((()=>{t((e=>e+1)),d((e=>e+(s||5)))})),m.onSubGift((()=>{t((e=>e+1)),d((e=>e+(s||5)))})),l.connect(),m.connect()})()}),[]),(0,s.jsxs)("div",{style:{fontFamily:"Comic Neue",fontSize:"xx-large",textAlign:"end",verticalAlign:"middle",textShadow:"4px 4px 6px rgba(0, 0, 0, 0.4)",margin:"2.5rem"},children:["Subs: ",c(e)," - Mod Actions: ",c(o),"/",c(Number(l))," - Total:"," ",c(m)]})}}}]);
//# sourceMappingURL=419.1fa076a1.chunk.js.map