"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[436],{1436:function(e,t,a){a.r(t);var i=a(1979),n=a(4507),r=a(2791),o=a(1889),l=a(7391),s=a(6377),c=a(8870),d=a(3044),h=a(6151),u=a(625),g=a(4070),m=a(4746),p=a(184);const f=(0,i.Z)({palette:{mode:"dark"}}),x=r.forwardRef((function(e,t){return(0,p.jsx)(g.Z,{elevation:6,ref:t,variant:"filled",...e})}));t.default=()=>{const[e,t]=(0,r.useState)([]),[a,i]=(0,r.useState)({name:"",id:null,avatarUrl:""}),[g,v]=(0,r.useState)(""),[S,j]=(0,r.useState)(!1),[_,w]=(0,r.useState)(!1),[y,C]=(0,r.useState)(""),[Z,b]=(0,r.useState)("");(0,r.useEffect)((()=>{document.title="LsCo Software - Dashboard"}),[]),(0,r.useEffect)((()=>{(async()=>{const e=JSON.parse(localStorage.getItem("login"));if(null!==localStorage.getItem("login"))try{const t=await fetch(`https://api.twitch.tv/helix/channels?broadcaster_id=${e.id}`,{headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("login")).access_token,"Client-ID":JSON.parse(localStorage.getItem("login")).client_id}}),a=await t.json();if(t.ok&&a.data.length>0){const e=a.data[0];i({name:e.game_name.length?e.game_name:"None",id:e.game_id.length?e.game_id:0,avatarUrl:""}),v(e.title)}}catch(t){console.error(t)}})()}),[]);const I=()=>{j(!0)},k=(e,t)=>{"clickaway"!==t&&j(!1)},O=(e,t)=>{"clickaway"!==t&&w(!1)};return(0,p.jsxs)(m.Z,{title:"Dashboard",description:"Here you can update the stream or get info about a user.",children:[(0,p.jsxs)(o.ZP,{container:!0,spacing:2,children:[(0,p.jsx)(o.ZP,{item:!0,xs:12,sm:6,children:(0,p.jsx)(n.Z,{theme:f,children:(0,p.jsx)(l.Z,{fullWidth:!0,id:"outlined-basic",label:"Title",variant:"outlined",value:g,onChange:e=>v(e.target.value),autoFocus:!0})})}),(0,p.jsx)(o.ZP,{item:!0,xs:12,sm:6,children:(0,p.jsx)(n.Z,{theme:f,children:(0,p.jsx)(s.Z,{value:a,options:e,getOptionLabel:e=>e.name,onChange:(e,t)=>{i(null!==t&&void 0!==t?t:{name:"",id:null,avatarUrl:""})},isOptionEqualToValue:(e,t)=>e.id===t.id,renderInput:e=>(0,p.jsx)(l.Z,{...e,fullWidth:!0,id:"outlined-basic",label:"Game",variant:"outlined",onChange:e=>{(async e=>{if(!localStorage.getItem("login"))return t([]);if(""!==e.trim()){const a=await fetch(`https://api.twitch.tv/helix/search/categories?query=${decodeURIComponent(e)}&first=15`,{headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("login")).access_token,"Client-ID":JSON.parse(localStorage.getItem("login")).client_id}}),i=await a.json();a.ok?t(i.data.map((e=>({name:e.name,id:e.id,avatarUrl:e.box_art_url.replace("500","520")})))):t([])}else t([])})(e.target.value)}}),renderOption:(e,t)=>(0,p.jsx)("li",{...e,children:(0,p.jsxs)(c.Z,{display:"flex",alignItems:"center",children:[(0,p.jsx)(d.Z,{variant:"square",src:t.avatarUrl,alt:t.name,sx:{width:35,height:45,marginRight:1}}),t.name]})})})})}),(0,p.jsx)(o.ZP,{item:!0,children:(0,p.jsx)(h.Z,{variant:"text",fullWidth:!0,onClick:async()=>{const e=JSON.parse(localStorage.getItem("login"));if(!e)return C("Log in with your Twitch account to use this tool"),void I();const t=decodeURIComponent(e.id);try{var i;const n=await fetch(`https://api.twitch.tv/helix/channels?broadcaster_id=${t}`,{method:"PATCH",headers:{Authorization:"Bearer "+e.access_token,"Client-ID":e.client_id,"Content-Type":"application/json"},body:JSON.stringify({game_id:null!==(i=a.id)&&void 0!==i?i:0,title:g.length?g:" "})});if(n.ok)b("Successfully updated your title & game."),w(!0);else{const e=await n.json();C(e.message),I()}}catch(n){console.error(n)}},children:"Update"})})]}),(0,p.jsx)(u.Z,{open:S,autoHideDuration:2500,onClose:k,children:(0,p.jsx)(x,{onClose:k,severity:"error",sx:{width:"100%"},children:y})}),(0,p.jsx)(u.Z,{open:_,autoHideDuration:1500,onClose:O,children:(0,p.jsx)(x,{onClose:O,severity:"success",sx:{width:"100%"},children:Z})})]})}}}]);
//# sourceMappingURL=436.5766c59c.chunk.js.map