"use strict";(self.webpackChunkpage=self.webpackChunkpage||[]).push([[347],{4347:function(e,t,a){a.r(t),a.d(t,{default:function(){return k}});var o=a(1979),s=a(4507),n=a(1889),i=a(6377),r=a(7391),l=a(8870),c=a(3044),h=a(8096),d=a(829),u=a(8837),p=a(3786),g=a(890),m=a(3469),f=a(6151),w=a(6999),S=a(2791);const y=(e,t)=>t.some((t=>t instanceof RegExp?t.test(e):t===e)),b=new Set(["https:","http:","file:"]);function x(e,t){if("string"!==typeof(t={defaultProtocol:"http",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,removeExplicitPort:!1,sortQueryParameters:!0,...t}).defaultProtocol||t.defaultProtocol.endsWith(":")||(t.defaultProtocol=`${t.defaultProtocol}:`),e=e.trim(),/^data:/i.test(e))return((e,t)=>{let{stripHash:a}=t;const o=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(e);if(!o)throw new Error(`Invalid URL: ${e}`);let{type:s,data:n,hash:i}=o.groups;const r=s.split(";");i=a?"":i;let l=!1;"base64"===r[r.length-1]&&(r.pop(),l=!0);const c=r.shift()?.toLowerCase()??"",h=[...r.map((e=>{let[t,a=""]=e.split("=").map((e=>e.trim()));return"charset"===t&&(a=a.toLowerCase(),"us-ascii"===a)?"":`${t}${a?`=${a}`:""}`})).filter(Boolean)];return l&&h.push("base64"),(h.length>0||c&&"text/plain"!==c)&&h.unshift(c),`data:${h.join(";")},${l?n.trim():n}${i?`#${i}`:""}`})(e,t);if((e=>{try{const{protocol:t}=new URL(e);return t.endsWith(":")&&!b.has(t)}catch{return!1}})(e))return e;const a=e.startsWith("//");!a&&/^\.*\//.test(e)||(e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,t.defaultProtocol));const o=new URL(e);if(t.forceHttp&&t.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(t.forceHttp&&"https:"===o.protocol&&(o.protocol="http:"),t.forceHttps&&"http:"===o.protocol&&(o.protocol="https:"),t.stripAuthentication&&(o.username="",o.password=""),t.stripHash?o.hash="":t.stripTextFragment&&(o.hash=o.hash.replace(/#?:~:text.*?$/i,"")),o.pathname){const e=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g;let t=0,a="";for(;;){const s=e.exec(o.pathname);if(!s)break;const n=s[0],i=s.index;a+=o.pathname.slice(t,i).replace(/\/{2,}/g,"/"),a+=n,t=i+n.length}a+=o.pathname.slice(t,o.pathname.length).replace(/\/{2,}/g,"/"),o.pathname=a}if(o.pathname)try{o.pathname=decodeURI(o.pathname)}catch{}if(!0===t.removeDirectoryIndex&&(t.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(t.removeDirectoryIndex)&&t.removeDirectoryIndex.length>0){let e=o.pathname.split("/");const a=e[e.length-1];y(a,t.removeDirectoryIndex)&&(e=e.slice(0,-1),o.pathname=e.slice(1).join("/")+"/")}if(o.hostname&&(o.hostname=o.hostname.replace(/\.$/,""),t.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(o.hostname)&&(o.hostname=o.hostname.replace(/^www\./,""))),Array.isArray(t.removeQueryParameters))for(const n of[...o.searchParams.keys()])y(n,t.removeQueryParameters)&&o.searchParams.delete(n);if(Array.isArray(t.keepQueryParameters)||!0!==t.removeQueryParameters||(o.search=""),Array.isArray(t.keepQueryParameters)&&t.keepQueryParameters.length>0)for(const n of[...o.searchParams.keys()])y(n,t.keepQueryParameters)||o.searchParams.delete(n);if(t.sortQueryParameters){o.searchParams.sort();try{o.search=decodeURIComponent(o.search)}catch{}}t.removeTrailingSlash&&(o.pathname=o.pathname.replace(/\/$/,"")),t.removeExplicitPort&&o.port&&(o.port="");const s=e;return e=o.toString(),t.removeSingleSlash||"/"!==o.pathname||s.endsWith("/")||""!==o.hash||(e=e.replace(/\/$/,"")),(t.removeTrailingSlash||"/"===o.pathname)&&""===o.hash&&t.removeSingleSlash&&(e=e.replace(/\/$/,"")),a&&!t.normalizeProtocol&&(e=e.replace(/^http:\/\//,"//")),t.stripProtocol&&(e=e.replace(/^(?:https?:)?\/\//,"")),e}var v=a(184);const I=/^https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_.+~#?&/=]*)$/i,j=(0,o.Z)({palette:{mode:"dark"}}),$=[{value:25,label:"25"},{value:100,label:"100"},{value:250,label:"250"},{value:500,label:"500"},{value:750,label:"750"},{value:1e3,label:"1000"}];function P(e){return`${e}ms`}function C(e,t){let a=[];for(let o=0;o<e.length;o+=t){let s=e.slice(o,o+t);a.push(s)}return a}var k=()=>{const[e,t]=(0,S.useState)(""),[a,o]=(0,S.useState)(null),[y,b]=(0,S.useState)(null),[k,_]=(0,S.useState)(""),[O,L]=(0,S.useState)(""),[N,E]=(0,S.useState)(100),[T,Z]=(0,S.useState)([]);async function J(e,t){try{await Promise.all(C(t,100).map((async e=>{const a=await fetch(`https://api.twitch.tv/helix/users?login=${e.map((e=>e.login)).join("&login=")}`,{headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("login")).access_token,"Client-ID":JSON.parse(localStorage.getItem("login")).client_id}}),o=await a.json();if(!a.ok)throw new Error(`API Error -> Status: ${o.error}, ${o.status} - ${o.message}`);return o.data.forEach((e=>{const a=t.find((t=>t.login===e.login));a&&(a.id=e.id)})),o.data.map((e=>e.id))})));for(let a=0;a<t.length;a++){const o=t[a];fetch(`https://api.twitch.tv/helix/moderation/bans?broadcaster_id=${e}&moderator_id=${JSON.parse(localStorage.getItem("login")).id}`,{method:"POST",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("login")).access_token,"Client-ID":JSON.parse(localStorage.getItem("login")).client_id,"Content-Type":"application/json"},body:JSON.stringify({data:{user_id:o.id,reason:o.reason}})}),await new Promise((e=>setTimeout(e,N)))}}catch(a){throw console.log(a),new Error(`Error: ${a.message}`)}}async function A(e,t){try{await Promise.all(C(t,100).map((async e=>{const a=await fetch(`https://api.twitch.tv/helix/users?login=${e.map((e=>e.login)).join("&login=")}`,{headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("login")).access_token,"Client-ID":JSON.parse(localStorage.getItem("login")).client_id}}),o=await a.json();if(!a.ok)throw new Error(`API Error -> Status: ${o.error}, ${o.status} - ${o.message}`);return o.data.forEach((e=>{const a=t.find((t=>t.login===e.login));a&&(a.id=e.id)})),o.data.map((e=>e.id))})));for(let a=0;a<t.length;a++){const o=t[a];fetch(`https://api.twitch.tv/helix/moderation/bans?broadcaster_id=${e}&moderator_id=${JSON.parse(localStorage.getItem("login")).id}`,{method:"POST",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("login")).access_token,"Client-ID":JSON.parse(localStorage.getItem("login")).client_id,"Content-Type":"application/json"},body:JSON.stringify({data:{user_id:o.id,duration:Number(o.duration),reason:o.reason}})}),await new Promise((e=>setTimeout(e,N)))}}catch(a){throw console.log(a),new Error(`Error: ${a.message}`)}}async function D(e,t){try{for(let a=0;a<t.length;a++){const o=t[a];fetch(`https://api.twitch.tv/helix/moderation/bans?broadcaster_id=${e}&moderator_id=${JSON.parse(localStorage.getItem("login")).id}`,{method:"POST",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("login")).access_token,"Client-ID":JSON.parse(localStorage.getItem("login")).client_id,"Content-Type":"application/json"},body:JSON.stringify({data:{user_id:o.id,reason:o.reason}})}),await new Promise((e=>setTimeout(e,N)))}}catch(a){throw console.log(a),new Error(`Error: ${a.message}`)}}async function B(e,t){try{for(let a=0;a<t.length;a++){const o=t[a];fetch(`https://api.twitch.tv/helix/moderation/bans?broadcaster_id=${e}&moderator_id=${JSON.parse(localStorage.getItem("login")).id}`,{method:"POST",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("login")).access_token,"Client-ID":JSON.parse(localStorage.getItem("login")).client_id,"Content-Type":"application/json"},body:JSON.stringify({data:{user_id:o.id,duration:Number(o.duration),reason:o.reason}})}),await new Promise((e=>setTimeout(e,N)))}}catch(a){throw console.log(a),new Error(`Error: ${a.message}`)}}async function z(e,t){try{await Promise.all(C(t,100).map((async e=>{const a=await fetch(`https://api.twitch.tv/helix/users?login=${e.map((e=>e.login)).join("&login=")}`,{headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("login")).access_token,"Client-ID":JSON.parse(localStorage.getItem("login")).client_id}}),o=await a.json();if(!a.ok)throw new Error(`API Error -> Status: ${o.error}, ${o.status} - ${o.message}`);return o.data.forEach((e=>{const a=t.find((t=>t.login===e.login));a&&(a.id=e.id)})),o.data.map((e=>e.id))})));for(let a=0;a<t.length;a++){const o=t[a];fetch(`https://api.twitch.tv/helix/moderation/bans?broadcaster_id=${e}&moderator_id=${JSON.parse(localStorage.getItem("login")).id}&user_id=${o.id}`,{method:"DELETE",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("login")).access_token,"Client-ID":JSON.parse(localStorage.getItem("login")).client_id,"Content-Type":"application/json"}}),await new Promise((e=>setTimeout(e,N)))}}catch(a){throw console.log(a),new Error(`Error: ${a.message}`)}}async function W(e,t){try{for(let a=0;a<t.length;a++){const o=t[a];fetch(`https://api.twitch.tv/helix/moderation/bans?broadcaster_id=${e}&moderator_id=${JSON.parse(localStorage.getItem("login")).id}&user_id=${o.id}`,{method:"DELETE",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("login")).access_token,"Client-ID":JSON.parse(localStorage.getItem("login")).client_id,"Content-Type":"application/json"}}),await new Promise((e=>setTimeout(e,N)))}}catch(a){throw console.log(a),new Error(`Error: ${a.message}`)}}(0,S.useEffect)((()=>{document.title="LsCo Software - Filesay"}),[]),(0,S.useEffect)((()=>{localStorage.getItem("login")||null||(o("Log in to get started."),b(null))}),[]);return(0,v.jsx)(w.Z,{title:"Filesay",description:"Ban/timeout multiple users in a specific channel.",children:(0,v.jsxs)(n.ZP,{container:!0,spacing:2,alignItems:"center",children:[(0,v.jsx)(n.ZP,{item:!0,xs:12,sm:6,children:(0,v.jsx)(s.Z,{theme:j,children:(0,v.jsx)(i.Z,{options:T,getOptionLabel:e=>e.name,onChange:(e,t)=>{L(t)},renderInput:e=>(0,v.jsx)(r.Z,{...e,fullWidth:!0,id:"outlined-basic",label:"Channel",variant:"outlined",onChange:e=>{(async e=>{if(!localStorage.getItem("login"))return Z([]);if(""!==e.trim()){const t=await fetch(`https://api.twitch.tv/helix/search/channels?query=${e}&first=25`,{headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("login")).access_token,"Client-ID":JSON.parse(localStorage.getItem("login")).client_id}}),a=await t.json();t.ok?Z(a.data.map((e=>({name:e.display_name,id:e.id,avatarUrl:e.thumbnail_url.replace("300x300","50x50")})))):Z([])}else Z([])})(e.target.value)}}),renderOption:(e,t)=>(0,v.jsx)("li",{...e,children:(0,v.jsxs)(l.Z,{display:"flex",alignItems:"center",children:[(0,v.jsx)(c.Z,{src:t.avatarUrl,alt:t.name,sx:{width:25,height:25,marginRight:1}}),t.name]})})})})}),(0,v.jsx)(n.ZP,{item:!0,xs:12,sm:6,children:(0,v.jsx)(s.Z,{theme:j,children:(0,v.jsxs)(h.Z,{fullWidth:!0,id:"outlined-basic",variant:"outlined",children:[(0,v.jsx)(d.Z,{id:"type-label",children:"Type"}),(0,v.jsxs)(u.Z,{label:"Type",value:k,onChange:e=>_(e.target.value),labelId:"type-label",id:"type-select",children:[(0,v.jsx)(p.Z,{value:"filesay",children:"Filesay"}),(0,v.jsx)(p.Z,{value:"ban-list-name",children:"Ban List (Name)"}),(0,v.jsx)(p.Z,{value:"unban-list-name",children:"Unban List (Name)"}),(0,v.jsx)(p.Z,{value:"ban-list-id",children:"Ban List (ID)"}),(0,v.jsx)(p.Z,{value:"unban-list-id",children:"Unban List (ID)"})]})]})})}),(0,v.jsx)(n.ZP,{item:!0,xs:12,children:(0,v.jsx)(s.Z,{theme:j,children:(0,v.jsx)(r.Z,{fullWidth:!0,multiline:!0,rows:10,id:"outlined-basic",label:"Text",variant:"outlined",value:e,onChange:e=>t(e.target.value)})})}),(0,v.jsxs)(n.ZP,{item:!0,xs:12,style:{textAlign:"right"},children:["Lines. (",e.split("\n").length,"/500)"]}),(0,v.jsx)(s.Z,{theme:j,children:(0,v.jsxs)(n.ZP,{item:!0,xs:12,children:[(0,v.jsx)(g.Z,{gutterBottom:!0,children:"Output speed in ms (Milliseconds)"}),(0,v.jsx)(h.Z,{fullWidth:!0,variant:"filled",children:(0,v.jsx)(m.ZP,{"aria-label":"Delay",value:N,onChange:(e,t)=>{E(t)},getAriaValueText:P,step:null,valueLabelDisplay:"auto",marks:$,min:$[0].value,max:$[$.length-1].value})})]})}),(0,v.jsx)(n.ZP,{item:!0,xs:12,children:(0,v.jsx)(f.Z,{variant:"contained",fullWidth:!0,onClick:async()=>{if(!localStorage.getItem("login"))return o(null),void b("Log in to get started.");if(!O)return o(null),void b("You must specify a channel");if(!k)return o(null),void b("You must specify a filesay type");if(!e.trim())return o(null),void b("You must specify a filesay list");try{const a=O.id,s=e.split(/\r?\n/).map((e=>e.trim()));let n;if(s.length>=2500)return o(null),void b("You have too many lines.");o(null),b(null),n="ban-list-id"===k?4:"unban-list-id"===k?3:"ban-list-name"===k?2:"unban-list-name"===k?1:0;const i=[],r=[],l=[],c=[],h=[],d=[],u=[];for(let e=0;e<s.length;e++){const a=s[e];if(a)if(I.test(a)){let e;try{const t=new URL(x(a)).toString(),s=await fetch(t),n=s.headers.get("content-type");if(!n||!n.match(/text\/plain;\scharset=UTF-8/i))return o(null),void b("Invalid raw data.");e=(await s.text()).split(/\r?\n/).map((e=>e.trim()))}catch(t){return console.log(t),o(null),void b("Couldn't fetch list")}for(let t=0;t<e.length;t++){const a=e[t];switch(n){case 0:switch(!0){case null!==a.match(/^(\.|\/)timeout\s\w+\s(\d+)(\s.+)?/i):{const[,e,t,...o]=a.split(/\s+/);r.find((t=>t.login===e.toLowerCase()))||r.push({login:e.toLowerCase(),duration:t,reason:o.join(" ")||""});break}case null!==a.match(/^(\.|\/)ban\s\w+(\s.+)?/i):{const[,e,...t]=a.split(/\s+/);h.find((t=>t.login===e.toLowerCase()))||h.push({login:e.toLowerCase(),reason:t.join(" ")||""});break}case null!==a.match(/^(\.|\/)unban\s\w+/i)||null!==a.match(/^(\.|\/)untimeout\s\w+/i):{const[,e]=a.split(/\s+/);c.find((t=>t.login===e.toLowerCase()))||c.push({login:e.toLowerCase()});break}case null!==a.match(/^(\.|\/)timeoutid\s\w+\s(\d+)(\s.+)?/i):{const[,e,t,...o]=a.split(/\s+/);l.find((t=>t.id===e))||l.push({id:e,duration:t,reason:o.join(" ")||""});break}case null!==a.match(/^(\.|\/)banid\s\w+(\s.+)?/i):{const[,e,...t]=a.split(/\s+/);u.find((t=>t.id===e))||u.push({id:e,reason:t.join(" ")||""});break}case null!==a.match(/^(\.|\/)unbanid\s\w+/i)||null!==a.match(/^(\.|\/)untimeoutid\s\w+/i):{const[,e]=a.split(/\s+/);d.find((t=>t.id===e))||d.push({id:e});break}default:i.push({message:a})}break;case 1:{const[e]=a.split(/\s+/);c.find((t=>t.login===e.toLowerCase()))||c.push({login:e.toLowerCase()});break}case 2:{const[e,...t]=a.split(/\s+/);h.find((t=>t.login===e.toLowerCase()))||h.push({login:e.toLowerCase(),reason:t?t.join(" "):"Ban-list"});break}case 3:{const[e]=a.split(/\s+/);c.find((t=>t.id===e))||d.push({id:e});break}case 4:{const[e,...t]=a.split(/\s+/);h.find((t=>t.id===e))||u.push({id:e,reason:t?t.join(" "):"Ban-list"});break}}}}else switch(n){case 0:switch(!0){case null!==a.match(/^(\.|\/)timeout\s\w+\s(\d+)(\s.+)?/i):{const[,e,t,...o]=a.split(/\s+/);r.find((t=>t.login===e.toLowerCase()))||r.push({login:e.toLowerCase(),duration:t,reason:o.join(" ")||""});break}case null!==a.match(/^(\.|\/)ban\s\w+(\s.+)?/i):{const[,e,...t]=a.split(/\s+/);h.find((t=>t.login===e.toLowerCase()))||h.push({login:e.toLowerCase(),reason:t.join(" ")||""});break}case null!==a.match(/^(\.|\/)unban\s\w+/i)||null!==a.match(/^(\.|\/)untimeout\s\w+/i):{const[,e]=a.split(/\s+/);c.find((t=>t.login===e.toLowerCase()))||c.push({login:e.toLowerCase()});break}case null!==a.match(/^(\.|\/)timeoutid\s\w+\s(\d+)(\s.+)?/i):{const[,e,t,...o]=a.split(/\s+/);l.find((t=>t.id===e))||l.push({id:e,duration:t,reason:o.join(" ")||""});break}case null!==a.match(/^(\.|\/)banid\s\w+(\s.+)?/i):{const[,e,...t]=a.split(/\s+/);u.find((t=>t.id===e))||u.push({id:e,reason:t.join(" ")||""});break}case null!==a.match(/^(\.|\/)unbanid\s\w+/i)||null!==a.match(/^(\.|\/)untimeoutid\s\w+/i):{const[,e]=a.split(/\s+/);d.find((t=>t.id===e))||d.push({id:e});break}default:i.push({message:a})}break;case 1:{const[e]=a.split(/\s+/);c.find((t=>t.login===e.toLowerCase()))||c.push({login:e.toLowerCase()});break}case 2:{const[e,...t]=a.split(/\s+/);h.find((t=>t.login===e.toLowerCase()))||h.push({login:e.toLowerCase(),reason:t?t.join(" "):"Ban-list"});break}case 3:{const[e]=a.split(/\s+/);c.find((t=>t.id===e))||d.push({id:e});break}case 4:{const[e,...t]=a.split(/\s+/);h.find((t=>t.id===e))||u.push({id:e,reason:t?t.join(" "):"Ban-list"});break}}}console.log("Bans",h,h.length),console.log("Unbans",c,c.length),console.log("Bans (ID)",u,u.length),console.log("Unbans (ID)",d,d.length),console.log("Timeouts",r,r.length),console.log("Timeouts (ID)",l,l.length),console.log("Messages",i,i.length),await Promise.all([J(a,h),z(a,c),D(a,u),W(a,d),A(a,r),B(a,l)]);const p=await async function(e){if(!e)return null;const t=await fetch(`https://api.twitch.tv/helix/users?id=${encodeURIComponent(e)}`,{responseType:"json",throwHttpErrors:!1,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("login")).access_token,"Client-ID":JSON.parse(localStorage.getItem("login")).client_id}}),a=await t.json();if(!t.ok)throw new Error(a.message?`${a.error}, ${a.message}`:t.statusText);if(!a.data[0])throw new Error("Login not found.");return a.data[0].login}(JSON.parse(localStorage.getItem("login")).id);if(i.length){const e=new WebSocket("wss://irc-ws.chat.twitch.tv");e.onopen=async()=>{e.send("CAP REQ :twitch.tv/membership twitch.tv/tags twitch.tv/commands"),e.send("PASS oauth:"+JSON.parse(localStorage.getItem("login")).access_token),e.send("NICK "+p);for(let t=0;t<i.length;t++){const a=i[t].message;e.send(`PRIVMSG #${O.name.toLowerCase()} :${a}`),await new Promise((e=>setTimeout(e,N))),t===i.length-1&&e.close()}}}}catch(a){return console.log(a),o(null),void b(a.message)}},children:"Send"})}),(0,v.jsxs)(n.ZP,{item:!0,xs:12,children:[y&&(0,v.jsx)(g.Z,{variant:"body2",style:{color:"red",marginTop:"10px",textAlign:"center"},children:y}),a&&(0,v.jsx)(g.Z,{variant:"body2",style:{marginTop:"10px",textAlign:"center"},children:a})]})]})})}}}]);
//# sourceMappingURL=347.3a59ae39.chunk.js.map