"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[419],{5419:function(e,t,a){a.r(t);var o=a(2791),n=a(7564),r=a(6787),c=a(184);const s=new r.A({channels:[new URLSearchParams(window.location.search).get("login")]}),i=new n.p;function l(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}t.default=()=>{var e,t,a;const[n,r]=(0,o.useState)(null!==(e=localStorage.getItem("marathon_moderation_action"))&&void 0!==e?e:0),[m,u]=(0,o.useState)(null!==(t=localStorage.getItem("marathon_subs"))&&void 0!==t?t:0);(0,o.useEffect)((()=>{!async function(){document.title="LsCo Software - Modding Marathon",document.body.style.backgroundColor="initial !important";const e=new URLSearchParams(window.location.search).get("access_token"),t=new URLSearchParams(window.location.search).get("login"),a=new URLSearchParams(window.location.search).get("id"),o=(await(async(e,t)=>{const a=await fetch("https://api.modscanner.com/twitch/user/"+e);return a.ok?[...(await a.json()).moderating.map((e=>e.id)),t]:[]})(t,a)).map((e=>`chat_moderator_actions.${a}.${e}`));i.onDisconnect(((e,t)=>{console.log("[PubSub] Disconnected",t)})),i.onListenError(((e,t)=>{console.error(`[PubSub] An error has occurred on topic '${e}':`,t)})),i.onConnect((async()=>{console.log("[PubSub] Connected"),await i.listen(o,e)})),i.onMessage((async(e,t)=>{if("chat_moderator_actions"===e.split(".").shift()&&t.data.created_by_user_id===a)switch(t.data.moderation_action){case"delete":case"timeout":case"ban":{const e=Number(localStorage.getItem("marathon_moderation_action"))+1;localStorage.setItem("marathon_moderation_action",e),r(e);break}}})),s.onSub((()=>{const e=Number(localStorage.getItem("marathon_subs"))+1;localStorage.setItem("marathon_subs",e),u(e)})),s.onResub((()=>{const e=Number(localStorage.getItem("marathon_subs"))+1;localStorage.setItem("marathon_subs",e),u(e)})),s.onSubGift((()=>{const e=Number(localStorage.getItem("marathon_subs"))+1;localStorage.setItem("marathon_subs",e),u(e),console.log("onSubGift")})),i.connect(),s.connect()}()}),[]);const d=new URLSearchParams(window.location.search);return(0,c.jsxs)("div",{style:{fontFamily:"Comic Neue",fontSize:"xx-large",textAlign:"end",verticalAlign:"middle",textShadow:"4px 4px 6px rgba(0, 0, 0, 0.4)",margin:"2.5rem"},children:["Subs: ",l(m)," - Mod Actions: ",l(n),"/",l(Number(m)*(null!==(a=d.get("countup"))&&void 0!==a?a:5))]})}}}]);
//# sourceMappingURL=419.c36c6a1c.chunk.js.map